'use strict';var _slicedToArray=function(){function e(e,t){var a=[],o=!0,s=!1,n=void 0;try{for(var i=e[Symbol.iterator](),r;!(o=(r=i.next()).done)&&(a.push(r.value),!(t&&a.length===t));o=!0);}catch(e){s=!0,n=e}finally{try{!o&&i['return']&&i['return']()}finally{if(s)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function o(s,n){try{var i=t[s](n),r=i.value}catch(e){return void a(e)}return i.done?void e(r):Promise.resolve(r).then(function(e){o('next',e)},function(e){o('throw',e)})}return o('next')})}}utopiasoftware[utopiasoftware_app_namespace].controller={startup:function e(){ons.ready(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ons.setDefaultDeviceBackButtonListener(function(){}),$('#loader-modal-message').html('Loading App...'),$('#loader-modal').get(0).show(),new ej.notifications.Toast({content:'',cssClass:'default-ej2-toast',target:document.body,position:{X:'Center',Y:'Bottom'},width:'100%',timeOut:0,extendedTimeout:0,showCloseButton:!0}).appendTo($('.page-toast').get(0)),new ej.notifications.Toast({content:'',cssClass:'default-ej2-toast',target:document.body,position:{X:'Center',Y:'Bottom'},width:'100%',timeOut:4e3,extendedTimeout:0,showCloseButton:!0}).appendTo($('.timed-page-toast').get(0)),new ej.buttons.Button({cssClass:'e-flat e-small',iconPosition:'Left'}).appendTo('#view-cart-page-delete-cart-item-yes'),new ej.buttons.Button({cssClass:'e-flat e-small',iconPosition:'Left'}).appendTo('#view-cart-page-delete-cart-item-no'),new ej.buttons.Button({cssClass:'e-flat e-small',iconPosition:'Left'}).appendTo('#cancel-order-yes'),new ej.buttons.Button({cssClass:'e-flat e-small',iconPosition:'Left'}).appendTo('#cancel-order-no');try{screen.orientation.lock('portrait')}catch(e){}return e.prev=10,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase=new PouchDB('SchoolsCheckout.db',{adapter:'cordova-sqlite',location:'default',androidDatabaseImplementation:2}),utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase=new PouchDB('SchoolsCheckoutEncrypted.db',{adapter:'cordova-sqlite',location:'default',androidDatabaseImplementation:2}),t=null,e.prev=14,e.next=17,new Promise(function(e,t){NativeStorage.getItem('utopiasoftware-schools-checkout-secure-key',e,t)});case 17:t=e.sent,e.next=25;break;case 20:return e.prev=20,e.t0=e['catch'](14),e.next=24,new Promise(function(e,t){NativeStorage.setItem('utopiasoftware-schools-checkout-secure-key',{password:Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine)},e,t)});case 24:t=e.sent;case 25:return e.next=27,new Promise(function(e,a){utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase.crypto(t.password,{ignore:['_attachments','_deleted','docType'],cb:function s(t,o){t?a(t):e(o)}})});case 27:e.next=31;break;case 29:e.prev=29,e.t1=e['catch'](10);case 31:return e.prev=31,$('ons-splitter').get(0).content.load('app-main-template'),StatusBar.backgroundColorByHexString('#363E7C'),navigator.splashscreen.hide(),utopiasoftware[utopiasoftware_app_namespace].model.isAppReady=!0,e.finish(31);case 37:case'end':return e.stop();}},e,this,[[10,29,31,37],[14,20]])})))},homePageViewModel:{newProductsCarousel:null,featuredProductsCarousel:null,salesProductsCarousel:null,pageInit:function o(e){var t=function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(){var s,n,i,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){o.next=3;break}return setTimeout(t,500),o.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.backButtonClicked,$('#home-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.pagePullHookAction,$('#home-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#home-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),o.prev=6,s=new Flickity($('#home-page #home-latest-design-block .row').get(0),{wrapAround:!0,groupCells:1,imagesLoaded:!0,cellSelector:'.col-xs-12',autoPlay:5e3,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'left',contain:!1,prevNextButtons:!1,pageDots:!1}),s.on('scroll',function(){s._utopiasoftware_scrollTimer&&(window.clearTimeout(s._utopiasoftware_scrollTimer),s._utopiasoftware_scrollTimer=null),s._utopiasoftware_scrollTimer=window.setTimeout(function(){s.playPlayer()},0)}),s.on('staticClick',function(e,t,a){}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel=s,n=new Flickity($('#home-page #home-featured-design-block .row').get(0),{wrapAround:!0,groupCells:1,cellSelector:'.col-xs-7',autoPlay:4e3,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'center',contain:!1,prevNextButtons:!1,pageDots:!1}),n.on('scroll',function(){n._utopiasoftware_scrollTimer&&(window.clearTimeout(n._utopiasoftware_scrollTimer),n._utopiasoftware_scrollTimer=null),n._utopiasoftware_scrollTimer=window.setTimeout(function(){n.playPlayer()},0)}),n.on('staticClick',function(e,t,a){a&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.productItemClicked(window.parseInt($(a).attr('data-product')),$(a).attr('data-segment'))}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel=n,i=new Flickity($('#home-page #home-sales-design-block .row').get(0),{wrapAround:!0,groupCells:1,cellSelector:'.col-xs-7',autoPlay:4500,pauseAutoPlayOnHover:!1,dragThreshold:10,initialIndex:0,cellAlign:'center',contain:!1,prevNextButtons:!1,pageDots:!1}),i.on('scroll',function(){i._utopiasoftware_scrollTimer&&(window.clearTimeout(i._utopiasoftware_scrollTimer),i._utopiasoftware_scrollTimer=null),i._utopiasoftware_scrollTimer=window.setTimeout(function(){i.playPlayer()},0)}),i.on('staticClick',function(e,t,a){a&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.productItemClicked(window.parseInt($(a).attr('data-product')),$(a).attr('data-segment'))}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel=i,$('#loader-modal').get(0).hide(),$('#home-page .page-preloader').css('display','block'),o.next=23,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();case 23:$('#home-page .page-preloader').css('display','none'),o.next=34;break;case 26:o.prev=26,o.t0=o['catch'](6),$('.page-toast').get(0).ej2_instances[0].hide('All'),r=$('.page-toast').get(0).ej2_instances[0],r.cssClass='error-ej2-toast',r.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',r.dataBind(),r.show();case 34:return o.prev=34,o.finish(34);case 36:case'end':return o.stop();}},o,this,[[6,26,34,36]])}));return function(){return o.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('OAK'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.reloadCells(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.reloadCells(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel&&utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.reloadCells()},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel=null,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel=null,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel=null},backButtonClicked:function e(){ons.notification.confirm('Do you want to close the app?',{title:'<img src="css/app-images/oak-design-logo.png" style="height: 1.5em; width: auto; margin-right: 0.5em">Exit App',buttonLabels:['No','Yes'],modifier:'utopiasoftware-alert-dialog utopiasoftware-oak-alert-dialog'}).then(function(e){1===e&&navigator.app.exitApp()})},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see live products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#home-page #home-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.loadProducts();case 5:$('#home-page .page-preloader').css('display','none'),e.next=16;break;case 8:e.prev=8,e.t0=e['catch'](2),a=$('.page-toast').get(0).ej2_instances[0],a.hide('All'),a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 16:return e.prev=16,$('#home-page #home-page-pull-hook').removeAttr('disabled'),t(),e.finish(16);case 20:case'end':return e.stop();}},e,this,[[2,8,16,20]])}));return function t(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=Math.ceil,t=Math.abs,a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[],navigator.connection.type===Connection.NONE?(s=$('.page-toast').get(0).ej2_instances[0],s.hide('All'),s.cssClass='default-ej2-toast',s.content='No Internet connection. Pull down to refresh and see live products',s.dataBind(),s.show(),o.push(new Promise(function(e,t){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('banner-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(t){$('#home-page #home-latest-design-block').css('opacity','1'),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.remove($('#home-page #home-latest-design-block .row .col-xs-12').get());for(var a=0,o;a<t.length;a++)o='<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="css/app-images/blank-img.png" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.append($('<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="css/app-images/blank-img.png" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>'));$('#home-page #home-latest-design-block').css({opacity:'0',display:'none'}),e()}).catch(function(){$('#home-page #home-latest-design-block').css({opacity:'0',display:'none'}),t()})})),o.push(new Promise(function(e,t){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('popular-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(t){0<t.length?($('#home-page #home-featured-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.remove($('#home-page #home-featured-design-block .row .col-xs-7').get())):$('#home-page #home-featured-design-block').css({opacity:'0',display:'none'});for(var a=0,o;a<t.length;a++)o='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                    data-product="'+a+'" data-segment="featured">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+t[a].images[0].src+'\');">\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+t[a].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(t[a].price),'n2')+'</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.append($(o));e()}).catch(function(){t()})})),o.push(new Promise(function(a,o){Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('sales-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(e){return e.products}).then(function(o){0<o.length?($('#home-page #home-sales-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.remove($('#home-page #home-sales-design-block .row .col-xs-7').get())):$('#home-page #home-sales-design-block').css({opacity:'0',display:'none'});for(var s=0;s<o.length;s++){o[s].regular_price&&''!=o[s].regular_price||(o[s].regular_price='0.00');var n='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                  data-product="'+s+'" data-segment="sales">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+o[s].images[0].src+'\');">\n                                        <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+e(100*(t(kendo.parseFloat(o[s].price)-kendo.parseFloat(o[s].regular_price))/kendo.parseFloat('0.00'===o[s].regular_price?o[s].price:o[s].regular_price)))+'% OFF\n                                                    </span>\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+o[s].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center; text-decoration: line-through">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[s].regular_price),'n2')+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[s].price),'n2')+'\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>';utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.append($(n))}a()}).catch(function(){o()})}))):(o.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'private',type:'external',page:1,per_page:5}})).then(function(t){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'banner-products',docType:'BANNER_PRODUCTS',products:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),0<t.length?($('#home-page #home-latest-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.remove($('#home-page #home-latest-design-block .row .col-xs-12').get())):$('#home-page #home-latest-design-block').css({opacity:'0',display:'none'});for(var a=0,o;a<t.length;a++)o='<div class="col-xs-12" style="padding-left: 0; padding-right: 0;">\n                                    <div class="e-card" style="min-height: 40vh; max-height: 90vh">\n                                        <div class="e-card-image" style="">\n                                        <img src="'+t[a].images[0].src+'" style="width: 100%; height: auto; max-height: 90vh">\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.newProductsCarousel.append($(o));e()}).catch(function(){t()})})),o.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:5,featured:!0}})).then(function(t){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'popular-products',docType:'POPULAR_PRODUCTS',products:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),0<t.length?($('#home-page #home-featured-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.remove($('#home-page #home-featured-design-block .row .col-xs-7').get())):$('#home-page #home-featured-design-block').css({opacity:'0',display:'none'});for(var a=0,o;a<t.length;a++)o='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                 data-product="'+a+'" data-segment="featured">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+t[a].images[0].src+'\');">\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+t[a].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(t[a].price),'n2')+'</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>',utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.featuredProductsCarousel.append($(o));e()}).catch(function(){t()})})),o.push(new Promise(function(a,o){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:5,on_sale:!0}})).then(function(o){utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'sales-products',docType:'SALES_PRODUCTS',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),0<o.length?($('#home-page #home-sales-design-block').css({opacity:'1',display:'block'}),utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.remove($('#home-page #home-sales-design-block .row .col-xs-7').get())):$('#home-page #home-sales-design-block').css({opacity:'0',display:'none'});for(var s=0;s<o.length;s++){o[s].regular_price&&''!=o[s].regular_price||(o[s].regular_price='0.00');var n='<div class="col-xs-7" style="margin-left: 20.5%; margin-right: 20.5%;" \n                                    data-product="'+s+'" data-segment="sales">\n                                    <div class="e-card" style="min-height: 34vh;">\n                                        <div class="e-card-image" style="height: 60%; \n                                        background-image: url(\''+o[s].images[0].src+'\');">\n                                        <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+e(100*(t(kendo.parseFloat(o[s].price)-kendo.parseFloat(o[s].regular_price))/kendo.parseFloat('0.00'===o[s].regular_price?o[s].price:o[s].regular_price)))+'% OFF\n                                                    </span>\n                                        </div>\n                                        <div class="e-card-header">\n                                            <div class="e-card-header-caption">\n                                                <div class="e-card-sub-title" style="color: #000000; text-align: center; font-size: 14px; text-transform: capitalize">\n                                                    '+o[s].name+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center; text-decoration: line-through">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[s].regular_price),'n2')+'\n                                                </div>\n                                                <div class="e-card-sub-title" style="text-align: center;">\n                                                &#x20a6;'+kendo.toString(kendo.parseFloat(o[s].price),'n2')+'\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>';utopiasoftware[utopiasoftware_app_namespace].controller.homePageViewModel.salesProductsCarousel.append($(n))}a()}).catch(function(){o()})}))),a.abrupt('return',Promise.all(o));case 3:case'end':return a.stop();}},a,this)}));return function e(){return a.apply(this,arguments)}}(),showMoreFeaturedProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,featured:!0});case 5:return t=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(t[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',a.dataBind(),a.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),showMoreSalesProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,on_sale:!0});case 5:return t=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(t[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',a.dataBind(),a.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),productItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],e.prev=1,e.t0=a,e.next='featured'===e.t0?5:'sales'===e.t0?9:13;break;case 5:return e.next=7,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('popular-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 7:return o=e.sent.products,e.abrupt('break',13);case 9:return e.next=11,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('sales-products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 11:return o=e.sent.products,e.abrupt('break',13);case 13:$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:o[t]}}),e.next=18;break;case 16:e.prev=16,e.t1=e['catch'](1);case 18:case'end':return e.stop();}},e,this,[[1,16]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},categoriesPageViewModel:{currentPage:0,pageSize:100,viewContentHeight:0,pageInit:function s(e){var t=Math.floor,a=function(){var s=_asyncToGenerator(regeneratorRuntime.mark(function s(){var n,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){s.next=3;break}return setTimeout(a,500),s.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.backButtonClicked,$('#categories-page-pull-hook',o).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pagePullHookAction,$('#categories-page-pull-hook',o).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#categories-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight=t($('#categories-page .page__content').height()),$('#categories-page .page__content').on('scroll',function(){window.setTimeout(function(){var e=t($('#categories-page .page__content').scrollTop()),a=100*(e/utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight);50<=a?$('#categories-page #categories-page-scroll-top-fab').css({transform:'scale(1)',display:'inline-block'}):$('#categories-page #categories-page-scroll-top-fab').css({transform:'scale(0)'})},0)}),o.on('click','.e-card',function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return t.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,category:$(e.currentTarget).attr('data-category-id')});case 5:return a=t.sent,t.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:t.next=18;break;case 10:t.prev=10,t.t0=t['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',o.dataBind(),o.show();case 18:return t.prev=18,$('#products-page .page-preloader').css('display','none'),t.finish(18);case 21:case'end':return t.stop();}},t,this,[[0,10,18,21]])})),0)}),s.prev=9,s.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories();case 12:return n=s.sent,s.next=15,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(n[0]);case 15:s.next=25;break;case 17:s.prev=17,s.t0=s['catch'](9),$('.page-toast').get(0).ej2_instances[0].hide('All'),i=$('.page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',i.dataBind(),i.show();case 25:return s.prev=25,$('#categories-page .page-preloader').css('display','none'),s.finish(25);case 28:case'end':return s.stop();}},s,this,[[9,17,25,28]])}));return function(){return s.apply(this,arguments)}}(),o=$(e.target);a()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('Products'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),$('#categories-page #categories-page-scroll-top-fab').css({display:'none'}),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.currentPage=0,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pageSize=100,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.viewContentHeight=0},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(0)},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see updated products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#categories-page #categories-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.loadCategories(1,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pageSize);case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.displayPageContent(a[0]);case 8:e.next=17;break;case 10:e.prev=10,e.t0=e['catch'](2),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Refresh to try again',o.dataBind(),o.show();case 17:return e.prev=17,$('#categories-page #categories-page-pull-hook').removeAttr('disabled'),t(),e.finish(17);case 21:case'end':return e.stop();}},e,this,[[2,10,17,21]])}));return function t(){return e.apply(this,arguments)}}(),loadCategories:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.currentPage+1,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.pageSize,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],navigator.connection.type===Connection.NONE?(s=$('.page-toast').get(0).ej2_instances[0],s.hide('All'),s.cssClass='default-ej2-toast',s.content='No Internet connection. Pull down to refresh and see updated products',s.dataBind(),s.show(),o.push(new Promise(function(e,a){var o=(''+t).padStart(7,'0')+'categories';Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(o,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(t){e(t.categories)}).catch(function(e){a(e)})}))):o.push(new Promise(function(e,o){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products/categories',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{order:'asc',orderby:'name',hide_empty:!0,page:t,per_page:a}})).then(function(a){if(0<a.length){a=a.filter(function(e){return'uncategorized'!==e.slug});var o=(''+t).padStart(7,'0')+'categories';utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:o,docType:'PRODUCT_CATEGORIES',categories:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),utopiasoftware[utopiasoftware_app_namespace].controller.categoriesPageViewModel.currentPage=t}e(a)}).catch(function(e){o(e)})})),e.abrupt('return',Promise.all(o));case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],o=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Promise(function(e){var s='';if(0>=t.length)e(t.length);else{for(var n=0;n<t.length;n++)s+='<div class="col-xs-4" ',s+=0==(n+1)%3?'style="border-bottom: 1px lightgray solid">':'style="border-right: 1px lightgray solid; border-bottom: 1px lightgray solid">',s+='\n                        <ons-ripple background="rgba(63, 81, 181, 0.3)"></ons-ripple>\n                        <div class="e-card" data-category-id="'+t[n].id+'">\n                            <div class="e-card-image" style="min-height: 100px; \n                            background-image: url(\''+t[n].image.src+'\');">\n                            </div>\n                            <div class="e-card-header">\n                                <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                                    <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                        '+t[n].name+'\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                      </div>';!0===o?$('#categories-page #categories-contents-container').html(s):!0===a?$('#categories-page #categories-contents-container').append(s):$('#categories-page #categories-contents-container').prepend(s),e(t.length)}}),e.abrupt('return',s);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),scrollPageToTop:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#categories-page .page__content').animate({scrollTop:0},400)},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},searchPageViewModel:{currentSearchResultsArray:null,pageInit:function o(e){var t=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){a.next=3;break}return setTimeout(t,500),a.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.backButtonClicked;try{new ej.dropdowns.AutoComplete({floatLabelType:'Never',placeholder:'Search Products',allowCustom:!0,filterType:'Contains',minLength:1e3,suggestionCount:20,dataSource:[],noRecordsTemplate:'Tap \'Search\' key to begin search',blur:function e(){this._allowRemoteSearch=!1,$('#search-page-search-input-popover').get(0).hide()},change:function t(){var e='';return!0===this._allowRemoteSearch?this.value&&''!==this.value.trim()?void(e=this.value.trim(),$('#search-page-search-input-popover #search-input-popover-list').html('\n                            <ons-list-item modifier="nodivider" lock-on-drag="true">\n                                <div class="left">\n                                    <ons-progress-circular indeterminate modifier="pull-hook" \n                                    style="transform: scale(0.6)"></ons-progress-circular>\n                                </div>\n                                <div class="center">\n                                    <div style="text-align: center;">\n                                        Searching for products\n                                    </div>\n                                </div>\n                            </ons-list-item>'),$('#search-page-search-input-popover').get(0).show(document.getElementById('search-page-input')),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.prev=1,t.next=4,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:3,search:e});case 4:return a=t.sent,t.next=7,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayPageContent(a[0]);case 7:t.next=20;break;case 9:t.prev=9,t.t0=t['catch'](1),$('#search-page #search-page-input').get(0).ej2_instances[0].focusOut(),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),o.dataBind(),o.show();case 20:case'end':return t.stop();}},t,this,[[1,9]])})),0)):void(this._allowRemoteSearch=!1):void(this._allowRemoteSearch=!1)}}).appendTo('#search-page-input')}catch(e){}case 5:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#app-main-page ons-toolbar div.title-bar').html('Search'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches()},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.deviceOnlineListener,!1),utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray=null;case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#search-page #search-page-input').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray=null},backButtonClicked:function e(){$('#search-page-search-input-popover').get(0).hide(),$('#app-main-tabbar').get(0).setActiveTab(1)},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see search results',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},displayRecentSearches:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:for(t=e.sent,a='<ons-list-title>Recent Searches</ons-list-title>',o=0;o<t.products.length;o++)a+='\n                    <ons-list-item modifier="longdivider" tappable lock-on-drag="true">\n                        <div class="center">\n                            <div style="width: 100%;" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                              recentSearchesItemClicked('+o+')">\n                                <span class="list-item__subtitle">'+t.products[o].name+'</span>\n                            </div>\n                        </div>\n                        <div class="right" prevent-tap \n                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                                    removeRecentSearchItem('+o+', this);">\n                            <ons-icon icon="md-close-circle" style="color: lavender; font-size: 18px;"></ons-icon>\n                        </div>\n                    </ons-list-item>';$('#search-page #search-list').html(a),e.next=11;break;case 9:e.prev=9,e.t0=e['catch'](0);case 11:case'end':return e.stop();}},e,this,[[0,9]])}));return function t(){return e.apply(this,arguments)}}(),saveRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:a=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,a.unshift(t),a=a.slice(0,5),e.next=14,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 14:return e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 16:e.next=20;break;case 18:e.prev=18,e.t1=e['catch'](9);case 20:case'end':return e.stop();}},e,this,[[1,7],[9,18]])}));return function t(){return e.apply(this,arguments)}}(),removeRecentSearchItem:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 4:o=e.sent.products,e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](1);case 9:return e.prev=9,o.splice(t,1),e.next=13,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'recent-searches',docType:'RECENT_SEARCHES',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 13:return s=$(a).closest('ons-list-item'),e.next=16,kendo.fx(s).expand('vertical').duration(300).reverse();case 16:return e.next=18,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.displayRecentSearches();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e['catch'](9);case 22:case'end':return e.stop();}},e,this,[[1,7],[9,20]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),recentSearchesItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('recent-searches',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:a=e.sent.products,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:a[t]}}),e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](0);case 9:case'end':return e.stop();}},e,this,[[0,7]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),enterButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.which===kendo.keys.ENTER&&(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),Keyboard.hide(),a=$('#search-page #search-page-input').get(0).ej2_instances[0],a.value=$('#search-page #search-page-input').val(),a._allowRemoteSearch=!0,a.dataBind(),a.change());case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.page||1,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:t.per_page||3,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=a,t.per_page=o,s=[],navigator.connection.type===Connection.NONE?s.push(Promise.reject('no internet connection')):s.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:t})).then(function(t){0<t.length&&(utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray=t),e(t)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(s));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e){var a='';if(0>=t.length)$('#search-page-search-input-popover #search-input-popover-list').html('<ons-list-item modifier="nodivider" lock-on-drag="true">\n                                <div class="center">\n                                    <div style="text-align: center; width: 100%;">\n                                        No Results Found\n                                    </div>\n                                </div>\n                            </ons-list-item>'),e(t.length);else{for(var o=0;o<t.length;o++)a+='<ons-list-item modifier="nodivider" tappable lock-on-drag="true" \n                              onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.\n                              searchAutocompletePopOverItemClicked('+o+')">\n                                <div class="left">\n                                    <div class="search-result-image" style="background-image: url(\''+t[o].images[0].src+'\'); \n                                                            width: 2em; height: 2em"></div>\n                                </div>\n                                <div class="center">\n                                    <div style="text-align: center;">\n                                        '+t[o].name+'\n                                    </div>\n                                </div>\n                            </ons-list-item>';a+='<ons-list-item modifier="nodivider" tappable lock-on-drag="true" \n                          onclick="utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.findMoreClicked();">\n                                <div class="center">\n                                    <div style="text-align: center; width: 100%; font-weight: bold;">\n                                        Find More...\n                                    </div>\n                                </div>\n                            </ons-list-item>',$('#search-page-search-input-popover #search-input-popover-list').html(a),e(t.length)}}),e.abrupt('return',a);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),searchAutocompletePopOverItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.currentSearchResultsArray[t],window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:a}});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.searchPageViewModel.saveRecentSearchItem(a);case 5:$('#search-page #search-page-input').val(a.name),e.next=10;break;case 8:e.prev=8,e.t0=e['catch'](0);case 10:case'end':return e.stop();}},e,this,[[0,8]])})),0);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),findMoreClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-tabbar').get(0).setActiveTab(4,{animation:'none'});case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts({order:'desc',orderby:'date',status:'publish',type:'variable',stock_status:'instock',page:1,per_page:20,search:$('#search-page #search-page-input').get(0).ej2_instances[0].value.trim()});case 5:return t=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(t[0]);case 8:e.next=18;break;case 10:e.prev=10,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',a.dataBind(),a.show();case 18:return e.prev=18,$('#products-page .page-preloader').css('display','none'),e.finish(18);case 21:case'end':return e.stop();}},e,this,[[0,10,18,21]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},accountPageViewModel:{pageInit:function o(e){var t=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){a.next=3;break}return setTimeout(t,500),a.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.accountPageViewModel.backButtonClicked,$('#account-page #account-push-notification-preference').on('change',function(e){!0===e.originalEvent.value?window.plugins.OneSignal.setSubscription(!0):window.plugins.OneSignal.setSubscription(!1)});try{o=new ej.navigations.Accordion({expandMode:'Single'}),o.appendTo('#account-accordion'),o.expandItem(!0,0),$('#account-page #account-about-list-app-version').html(BuildInfo.version),$('#account-page #account-about-list-version-release').html(''+kendo.toString(BuildInfo.buildDate,'MMMM dd, yyyy'))}catch(e){}case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#app-main-page ons-toolbar div.title-bar').html('Account'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustPan'),e.next=5,new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:a=t.sent,$('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css('display','flex'),$('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)').css('display','none'),e(),t.next=14;break;case 9:t.prev=9,t.t0=t['catch'](0),$('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css('display','none'),$('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)').css('display','flex'),e();case 14:case'end':return t.stop();}},t,this,[[0,9]])})),0)});case 5:return e.next=7,new Promise(function(e){window.plugins.OneSignal.getPermissionSubscriptionState(function(t){$('#account-page #account-push-notification-preference').get(0).checked=!0===t.subscriptionStatus.subscribed&&!0===t.subscriptionStatus.userSubscriptionSetting,$('#account-page #account-push-notification-preference').get(0).disabled=!1,e()})});case 7:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#account-page #account-accordion').get(0).ej2_instances[0].destroy()},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(2)},signOutListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#loader-modal-message').html('Signing user out...'),e.next=3,$('#loader-modal').get(0).show();case 3:return e.prev=3,e.next=6,Promise.all([utopiasoftware[utopiasoftware_app_namespace].databaseOperations.removeData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase),utopiasoftware[utopiasoftware_app_namespace].databaseOperations.removeData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)]);case 6:return e.next=8,utopiasoftware[utopiasoftware_app_namespace].model.firebaseApp.auth().signOut();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e['catch'](3);case 12:return $('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow&&$('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow.utopiasoftware_removeUsage&&$('#user-signout-iframe-container #user-signout-iframe').get(0).contentWindow.utopiasoftware_removeUsage(),window.plugins.OneSignal.setSubscription(!1),e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.accountPageViewModel.pageShow();case 16:return $('#account-page .utopiasoftware-can-hide-list-item.utopiasoftware-user-sign-in-show').css('display','none'),$('#account-page .utopiasoftware-can-hide-list-item:not(.utopiasoftware-user-sign-in-show)').css('display','flex'),e.next=20,$('#loader-modal').get(0).hide();case 20:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='success-ej2-toast',t.timeOut=3e3,t.content='User signed out',t.dataBind(),t.show();case 28:case'end':return e.stop();}},e,this,[[3,10]])}));return function t(){return e.apply(this,arguments)}}(),profileListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return a=t.sent,t.next=6,$('#app-main-navigator').get(0).pushPage('profile-page.html');case 6:e(),t.next=20;break;case 9:t.prev=9,t.t0=t['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Sign in to view your profile',o.dataBind(),o.show(),e();case 20:case'end':return t.stop();}},t,this,[[0,9]])})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),trackOrderListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return a=t.sent,t.next=6,$('#app-main-navigator').get(0).pushPage('track-order-page.html');case 6:e(),t.next=20;break;case 9:t.prev=9,t.t0=t['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Sign in to track an order',o.dataBind(),o.show(),e();case 20:case'end':return t.stop();}},t,this,[[0,9]])})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),contactUsListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cordova.plugins.email.open({to:['info@oakexclusive.com','shop@oakexclusive.com'],subject:'[provide an appropriate subject]',body:'[Enter your inquiries]'});case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),shareAppListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},t.message='check out '+BuildInfo.displayName+' for printing exclusive custom designs on your merchandise',t.chooserTitle='share '+BuildInfo.displayName+' with...',t.files=['www/css/app-images/share-app-logo.jpg'],t.url='https://shopoakexclusive.page.link/share-app',window.setTimeout(function(){cordova.plugins.clipboard.copy(t.message+' | '+t.url,function(){window.plugins.toast.showWithOptions({message:'app share-link copied to clipboard',duration:3e3,position:'center',styling:{cornerRadius:0,opacity:1,backgroundColor:'#3F51B5',textColor:'#FFFFFF',textSize:14}}),window.setTimeout(function(){window.plugins.socialsharing.shareWithOptions(t,function(){},function(){})},1e3)},function(){})},0);case 6:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),tosListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{cordova.InAppBrowser.open(window.encodeURI('https://shopoakexclusive.com/terms-and-conditions/'),'_blank','location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=yes,zoom=no,toolbarcolor=#3f51b5'),e()}catch(t){e()}case 1:case'end':return t.stop();}},t,this)})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),privacyPolicyListItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{cordova.InAppBrowser.open(window.encodeURI('https://shopoakexclusive.com/privacy-policy/'),'_blank','location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=yes,zoom=no,toolbarcolor=#3f51b5'),e()}catch(t){e()}case 1:case'end':return t.stop();}},t,this)})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},loginPageViewModel:{loginFormValidator:null,signupFormValidator:null,forgotPasswordFormValidator:null,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked,a.on('postchange','#login-carousel',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.changeScreenCarouselPostChange),a.on('postchange','#login-carousel',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.hideTooltipsCarouselPostChange),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator=$('#login-page #login-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator=$('#login-page #signup-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator=$('#login-page #forgot-password-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:error',function(e){var t=$('#login-page #login-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('field:success',function(e){var t=$('#login-page #login-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidated),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:error',function(e){var t=$('#login-page #signup-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('field:success',function(e){var t=$('#login-page #signup-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidated),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('field:error',function(e){var t=$('#login-page #forgot-password-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('field:success',function(e){var t=$('#login-page #forgot-password-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidated),$('#login-page .login-page-form-container').on('scroll',function(){window.setTimeout(function(){switch($('#login-page #login-carousel').get(0).getActiveIndex()){case 0:$('#login-page #login-form ons-input').each(function(e,t){document.getElementById('login-form').ej2_instances[e].refresh(t)});break;case 1:$('#login-page #signup-form ons-input').each(function(e,t){document.getElementById('signup-form').ej2_instances[e].refresh(t)});break;case 2:$('#login-page #forgot-password-form ons-input').each(function(e,t){document.getElementById('forgot-password-form').ej2_instances[e].refresh(t)});}},0)});try{$('#login-form ons-input',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo($('#login-page #login-form').get(0))}),$('#signup-form ons-input',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo($('#login-page #signup-form').get(0))}),$('#forgot-password-form ons-input',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo($('#login-page #forgot-password-form').get(0))}),new ej.buttons.Button({isToggle:!0,cssClass:'e-flat e-small e-round',iconCss:'zmdi zmdi-eye',iconPosition:'Left'}).appendTo($('#signup-password-view-button',a).get(0))}catch(e){}case 20:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function t(){window.SoftInputMode.set('adjustPan');var e=window.parseFloat(''+cordova.plugins['extended-device-information'].memory);1e3>e?$('#login-page .third-party-signin-block').css('display','none'):$('#login-page .third-party-signin-block').css('display','flex'),window.addEventListener('keyboardDidShow',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener('keyboardDidShow',utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.keyboardShownAdjustView),$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.close()}),$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.close()}),$('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.reset(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.reset(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.reset();case 7:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#login-page #signup-password-view-button').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.destroy()},backButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',$('#app-main-navigator').get(0).popPage());case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),segmentButtonClicked:function t(e){$('#login-page #login-carousel').get(0).setActiveIndex(e)},passwordVisibilityButtonClicked:function a(e,t){if(!$(e).hasClass('e-active')){$(document.getElementById(t)).attr('type','text');var o=e.ej2_instances[0];o.iconCss='zmdi zmdi-eye-off',o.dataBind()}else{$(document.getElementById(t)).attr('type','password');var s=e.ej2_instances[0];s.iconCss='zmdi zmdi-eye',s.dataBind()}},changeScreenCarouselPostChange:function t(e){switch(e.originalEvent.activeIndex){case 0:$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input').prop('checked',!0),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-segment button input').prop('checked',!1),$('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(0);break;case 1:$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input').prop('checked',!0),$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-segment button input').prop('checked',!1),$('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(0);break;case 2:$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(1) input').prop('checked',!0),$('#login-page ons-carousel-item.first .login-segment button:nth-of-type(2) input').prop('checked',!1),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(2) input').prop('checked',!0),$('#login-page ons-carousel-item.second .login-segment button:nth-of-type(1) input').prop('checked',!1),$('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(0);}},hideTooltipsCarouselPostChange:function t(e){switch(e.originalEvent.lastActiveIndex){case 0:$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.close()});break;case 1:$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.close()});break;case 2:$('#login-page #forgot-password-form').get(0).ej2_instances.forEach(function(e){e.close()});}},keyboardShownAdjustView:function o(e){var t=Math.floor,a=Math.ceil(e.keyboardHeight)+6e3;switch($('#login-page #login-carousel').get(0).getActiveIndex()){case 0:$('#login-page ons-carousel-item.first .login-page-form-container').css({"padding-bottom":a+'px'}),$('#login-page ons-carousel-item.first .login-page-form-container').scrollTop(t($(document.activeElement).closest('ons-input').position().top-30));break;case 1:$('#login-page ons-carousel-item.second .login-page-form-container').css({"padding-bottom":a+'px'}),$('#login-page ons-carousel-item.second .login-page-form-container').scrollTop(t($(document.activeElement).closest('ons-input').position().top-30));break;case 2:$('#login-page ons-carousel-item.third .login-page-form-container').css({"padding-bottom":a+'px'}),$('#login-page ons-carousel-item.third .login-page-form-container').scrollTop(t($(document.activeElement).closest('ons-input').position().top-30));}},termsAndConditionsLinkClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cordova.InAppBrowser.open(window.encodeURI('https://shopoakexclusive.com/terms-and-conditions/'),'_blank','location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=yes,zoom=no,toolbarcolor=#3f51b5');case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),signinButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.loginFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),signupButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.signupFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),forgotPasswordButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cordova.InAppBrowser.open(window.encodeURI('https://shopoakexclusive.com/my-account/lost-password/'),'_blank','location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=yes,zoom=no,toolbarcolor=#3f51b5');case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),resetPasswordButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.forgotPasswordFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),thirdPartyLoginButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'sign in',a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3e3,a.content='Connect to the Internet to '+t,a.dataBind(),a.show(),e.abrupt('return');case 10:$('#login-page #login-form').get(0).ej2_instances.forEach(function(e){e.close()}),$('#login-page #signup-form').get(0).ej2_instances.forEach(function(e){e.close()}),'sign in'===t&&$('#third-party-login-modal #third-party-login-notice').css('display','block'),'sign up'===t&&$('#third-party-login-modal #third-party-login-notice').css('display','none'),$('#third-party-login-modal').get(0).show(),$('#third-party-login-modal #third-party-login-loader').css('display','block'),utopiasoftware[utopiasoftware_app_namespace].model.firebaseUI.start('#third-party-login-block',{signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID,{provider:firebase.auth.FacebookAuthProvider.PROVIDER_ID,customParameters:{auth_type:'reauthenticate'}},firebase.auth.TwitterAuthProvider.PROVIDER_ID],tosUrl:'https://shopoakexclusive.com/terms-and-conditions/',privacyPolicyUrl:'https://shopoakexclusive.com/privacy-policy/',callbacks:{uiShown:function e(){$('#third-party-login-modal #third-party-login-loader').css('display','none')},signInFailure:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('#third-party-login-modal').get(0).hide();case 2:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3500,o.content='Error with user '+t+'. Try again ',o.dataBind(),o.show(),a();case 11:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),signInSuccessWithAuthResult:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o,s,n,i,r,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('#third-party-login-modal').get(0).hide();case 2:if('sign in'!==t){e.next=46;break}return e.prev=3,$('#loader-modal-message').html('Completing Signin...'),e.next=7,$('#loader-modal').get(0).show();case 7:return e.next=9,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/customers',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{email:a.user.email}}));case 9:if(o=e.sent,0!=o.length){e.next=12;break}throw'error';case 12:return e.next=14,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/customers/'+o[0].id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify({password:a.user.uid})}));case 14:return o[0]=e.sent,o[0].password=a.user.uid,e.next=18,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:o[0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 18:return window.plugins.OneSignal.setSubscription(!0),window.plugins.OneSignal.sendTags({appMail:o[0].email}),e.next=22,$('#loader-modal').get(0).hide();case 22:return e.next=24,utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();case 24:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='success-ej2-toast',s.timeOut=3e3,s.content='User signin completed',s.dataBind(),s.show(),e.next=46;break;case 34:return e.prev=34,e.t0=e['catch'](3),e.next=38,$('#loader-modal').get(0).hide();case 38:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3500,n.content='User does not have an account. User signin failed ',n.dataBind(),n.show();case 46:if('sign up'!==t){e.next=86;break}return e.prev=47,$('#loader-modal-message').html('Completing Signup...'),e.next=51,$('#loader-modal').get(0).show();case 51:return e.next=53,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/customers',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify({email:a.user.email,username:a.user.email,password:a.user.uid})}));case 53:return i=e.sent,i.password=a.user.uid,e.next=57,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:i},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 57:return window.plugins.OneSignal.setSubscription(!0),window.plugins.OneSignal.sendTags({appMail:i.email}),e.next=61,$('#loader-modal').get(0).hide();case 61:return e.next=63,utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();case 63:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),r=$('.timed-page-toast').get(0).ej2_instances[0],r.cssClass='success-ej2-toast',r.timeOut=3e3,r.content='User signup completed',r.dataBind(),r.show(),e.next=86;break;case 73:return e.prev=73,e.t1=e['catch'](47),e.t1=JSON.parse(e.t1.responseText),e.next=78,$('#loader-modal').get(0).hide();case 78:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='error-ej2-toast',p.timeOut=3e3,p.content='Error. '+(e.t1.message||'User signup failed'),p.dataBind(),p.show();case 86:return e.abrupt('return',!1);case 87:case'end':return e.stop();}},e,this,[[3,34],[47,73]])}));return function t(){return e.apply(this,arguments)}}()}}),utopiasoftware[utopiasoftware_app_namespace].model.firebaseUI.disableAutoSignIn();case 18:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),loginFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to sign in',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#loader-modal-message').html('Completing Signin...'),e.next=13,$('#loader-modal').get(0).show();case 13:return a=[],o=$('#login-page #login-form #login-email').val().trim(),s=$('#login-page #login-form #login-password').val().trim(),a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(o+':'+s))},dataType:'json',timeout:24e4,processData:!1}))),a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/customers',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{email:o}}))),n=Promise.all(a),n.then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t[1][0].password=s,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:t[1][0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return window.plugins.OneSignal.setSubscription(!0),window.plugins.OneSignal.sendTags({appMail:t[1][0].email}),e.next=7,$('#loader-modal').get(0).hide();case 7:return e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();case 9:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='success-ej2-toast',a.timeOut=3e3,a.content='User signin completed',a.dataBind(),a.show();case 17:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()).catch(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(t.responseText),e.next=3,$('#loader-modal').get(0).hide();case 3:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3e3,a.content='Invalid user email or password. User signin failed ',a.dataBind(),a.show();case 11:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()),e.abrupt('return',n);case 21:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),signupFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to sign up',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#loader-modal-message').html('Completing Signup...'),e.next=13,$('#loader-modal').get(0).show();case 13:return a=[],a.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/customers',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify({email:$('#login-page #signup-form #signup-email').val().trim(),username:$('#login-page #signup-form #signup-email').val().trim(),password:$('#login-page #signup-form #signup-password').val().trim()})})).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.password=$('#login-page #signup-form #signup-password').val().trim(),t.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:a},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return window.plugins.OneSignal.setSubscription(!0),window.plugins.OneSignal.sendTags({appMail:a.email}),t.next=7,$('#loader-modal').get(0).hide();case 7:return t.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.backButtonClicked();case 9:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='success-ej2-toast',o.timeOut=3e3,o.content='User signup completed',o.dataBind(),o.show(),e(a);case 18:case'end':return t.stop();}},t,this)}));return function(){return t.apply(this,arguments)}}()).catch(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(a.responseText),e.next=3,$('#loader-modal').get(0).hide();case 3:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Error. '+(a.message||'User signup failed'),o.dataBind(),o.show(),t(a);case 12:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}())})),e.abrupt('return',Promise.all(a));case 16:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),forgotPasswordFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},productsPageViewModel:{currentPage:0,pageSize:20,viewContentHeight:0,lastActiveNavTab:0,currentQueryParam:{status:'publish'},pageInit:function s(e){var t=Math.floor,a=function(){var s=_asyncToGenerator(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){s.next=3;break}return setTimeout(a,500),s.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.backButtonClicked,e.target.onInfiniteScroll=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageInfiniteScroll,$('#products-page-pull-hook',o).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pagePullHookAction,$('#products-page-pull-hook',o).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#products-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight=t($('#products-page .page__content').height()),$('#products-page .page__content').on('scroll',function(){window.setTimeout(function(){var e=t($('#products-page .page__content').scrollTop()),a=100*(e/utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.viewContentHeight);50<=a?$('#products-page #products-page-scroll-top-fab').css({transform:'scale(1)',display:'inline-block'}):$('#products-page #products-page-scroll-top-fab').css({transform:'scale(0)'})},0)}),$('#app-main-tabbar').on('prechange',function(e){4===e.originalEvent.index||(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab=e.originalEvent.index)}),o.on('click','.e-card',function(e){utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.productItemClicked(window.parseInt($(e.currentTarget).attr('data-product')),window.parseInt($(e.currentTarget).attr('data-page')))});try{}catch(e){}case 12:case'end':return s.stop();}},s,this)}));return function(){return s.apply(this,arguments)}}(),o=$(e.target);a()},pageShow:function t(e){$('#app-main-page ons-toolbar div.title-bar').html('Products'),$('#app-main-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),!1!==$('#app-main-navigator').get(0)._resetPageDisplay&&(e.target._allowInfinitePageScroll=!1,$('#products-page .page-preloader').css('display','block'),$('#products-page #products-contents-container').html(''),$('#products-page #products-page-scroll-top-fab').css({display:'none'})),window.SoftInputMode.set('adjustPan'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.target._allowInfinitePageScroll=!1,delete $('#app-main-navigator').get(0)._resetPageDisplay,document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.deviceOnlineListener,!1),$('#products-page .page__content .infinite-load-container').remove();case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){},backButtonClicked:function e(){$('#app-main-tabbar').get(0).setActiveTab(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.lastActiveNavTab)},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to see updated products',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#products-page #products-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam,1);case 5:return a=e.sent,e.next=8,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0]);case 8:e.next=17;break;case 10:e.prev=10,e.t0=e['catch'](2),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Refresh to try again',o.dataBind(),o.show();case 17:return e.prev=17,$('#products-page .page-preloader').css('display','none'),$('#products-page #products-page-pull-hook').removeAttr('disabled'),t(),e.finish(17);case 22:case'end':return e.stop();}},e,this,[[2,10,17,22]])}));return function t(){return e.apply(this,arguments)}}(),pageInfiniteScroll:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==$('#products-page').get(0)._allowInfinitePageScroll){e.next=3;break}return t(),e.abrupt('return');case 3:return $('#products-page .page__content').append('<div class="infinite-load-container" style="text-align: center">\n                        <ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>\n                    </div>'),$('.page-toast').get(0).ej2_instances[0].hide('All'),a=[],e.prev=6,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.loadProducts(utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+1);case 9:return a=e.sent,e.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.displayPageContent(a[0],!0,!1);case 12:e.next=21;break;case 14:e.prev=14,e.t0=e['catch'](6),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Refresh to try again',o.dataBind(),o.show();case 21:return e.prev=21,a&&0<a[0].length?$('#products-page .page__content .infinite-load-container').remove():$('#products-page .page__content .infinite-load-container').css({visibility:'hidden'}),t(),e.finish(21);case 25:case'end':return e.stop();}},e,this,[[6,14,21,25]])}));return function t(){return e.apply(this,arguments)}}(),loadProducts:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.page||utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+1,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:t.per_page||utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.pageSize,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=a,t.per_page=o,s=[],navigator.connection.type===Connection.NONE?(n=$('.page-toast').get(0).ej2_instances[0],n.hide('All'),n.cssClass='default-ej2-toast',n.content='No Internet connection. Pull down to refresh and see updated products',n.dataBind(),n.show(),s.push(new Promise(function(e,o){var s=(''+a).padStart(7,'0')+'products';Promise.resolve(utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData(s,utopiasoftware[utopiasoftware_app_namespace].model.appDatabase)).then(function(a){utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage=t.page,e(a.products)}).catch(function(e){o(e)})}))):s.push(new Promise(function(e,o){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:t})).then(function(o){if(0<o.length){var s=(''+a).padStart(7,'0')+'products';utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:s,docType:'PRODUCTS',products:o},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase),utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage=t.page,utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentQueryParam=t}e(o)}).catch(function(e){o(e)})})),e.abrupt('return',Promise.all(s));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=Math.floor,t=Math.ceil,a=Math.abs,o=_asyncToGenerator(regeneratorRuntime.mark(function o(s){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=new Promise(function(o){var r='';if(0>=s.length)o(s.length);else{for(var p=0;p<s.length;p++)s[p].regular_price&&''!=s[p].regular_price||(s[p].regular_price='0.00'),r+='<div class="col-xs-4" ',r+=0==(p+1)%3?'style="border-bottom: 1px lightgray solid">':'style="border-right: 1px lightgray solid; border-bottom: 1px lightgray solid">',r+='\n                        <ons-ripple background="rgba(63, 81, 181, 0.3)"></ons-ripple>\n                        <div class="e-card" \n                        data-product="'+p+'" \n                        data-page="'+utopiasoftware[utopiasoftware_app_namespace].controller.productsPageViewModel.currentPage+'">\n                            <div class="e-card-image" style="min-height: 100px; \n                            background-image: url(\''+s[p].images[0].src+'\');">\n                            '+(!0===s[p].on_sale?'\n                            <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+t(100*(a(kendo.parseFloat(s[p].price)-kendo.parseFloat(s[p].regular_price))/kendo.parseFloat('0.00'===s[p].regular_price?s[p].price:s[p].regular_price)))+'% OFF\n                             </span>':'')+'\n                            </div>\n                            <div class="e-card-header">\n                                <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                                    <div class="e-card-sub-title" style="color: #000000; font-size: 14px; text-align: center; text-transform: capitalize">\n                                        '+s[p].name+'\n                                    </div>\n                        <div style="color: gold; font-size: 0.6em !important; white-space: nowrap !important; \n                        text-overflow: ellipsis; overflow: hidden;">\n                        '+(0<e(kendo.parseFloat(s[p].average_rating))?'<ons-icon icon="md-star" fixed-width></ons-icon>'.repeat(e(kendo.parseFloat(s[p].average_rating))):'<ons-icon icon="md-star-outline" style="color: lightgray" fixed-width></ons-icon>'.repeat(5))+'\n                            <span style="display: inline-block; color: gray;">\n                            '+(0<e(kendo.parseFloat(s[p].average_rating))?'('+s[p].rating_count+')':'')+'\n                           </span>\n                        </div>\n                        <div class="e-card-sub-title" style="text-align: left;">&#x20a6;'+kendo.toString(kendo.parseFloat(s[p].price),'n2')+'</div>\n                        <div class="e-card-sub-title" style="text-align: left; text-decoration: line-through; \n                        '+(!0===s[p].on_sale?'visibility: visible':'visibility: hidden')+'">&#x20a6;'+kendo.toString(kendo.parseFloat(s[p].regular_price),'n2')+'</div>\n                        </div>\n                        </div>\n                        </div>\n                        </div>';!0===i?$('#products-page #products-contents-container').html(r):!0===n?$('#products-page #products-contents-container').append(r):$('#products-page #products-contents-container').prepend(r),$('#products-page').get(0)._allowInfinitePageScroll=!0,o(s.length)}}),o.abrupt('return',r);case 2:case'end':return o.stop();}},o,this)}));return function e(){return o.apply(this,arguments)}}(),scrollPageToTop:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#products-page .page__content').animate({scrollTop:0},400)},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),productItemClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData((''+a).padStart(7,'0')+'products',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 3:o=e.sent.products,$('#app-main-navigator').get(0).pushPage('product-details-page.html',{animation:'lift',data:{product:o[t]}}),e.next=9;break;case 7:e.prev=7,e.t0=e['catch'](0);case 9:case'end':return e.stop();}},e,this,[[0,7]])})),0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},productDetailsPageViewModel:{currentProductDetails:null,currentProductVariationIndex:-1,productVariationsArray:[],pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.backButtonClicked,$('#product-details-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.pagePullHookAction,$('#product-details-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#product-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),e.prev=6,new ej.inputs.NumericTextBox({cssClass:'product-details-quantity-class',currency:null,decimals:0,floatLabelType:'Auto',format:'n',showSpinButton:!1,min:1,max:10,placeholder:'Pick Quantity',step:1,strictMode:!0,value:1}).appendTo('#product-details-quantity'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#product-details-add-to-cart'),new ej.buttons.Button({}).appendTo('#product-details-customise-product'),new ej.buttons.Button({cssClass:'e-flat e-small',iconCss:'zmdi zmdi-star-outline',iconPosition:'Left'}).appendTo('#product-details-review'),new ej.buttons.Button({cssClass:'e-flat e-small',iconCss:'zmdi zmdi-share',iconPosition:'Left'}).appendTo('#product-details-share'),$('#rate-product-modal #rate-product-rater-widget').rateYo({starWidth:'20px',normalFill:'#808080',ratedFill:'#F39C12',numStars:5,precision:0,rating:0,fullStar:!0,spacing:'10px',onChange:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#rate-product-modal #rate-product-comment').removeAttr('disabled'),$('#rate-product-modal #rate-product-rate-button').removeAttr('disabled');case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()}),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProductVariations(),e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProduct();case 16:return o=e.sent,e.next=19,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.displayProductDetails(o[0]);case 19:$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),e.next=30;break;case 22:e.prev=22,e.t0=e['catch'](6),$('.page-toast').get(0).ej2_instances[0].hide('All'),s=$('.page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',s.dataBind(),s.show();case 30:return e.prev=30,$('#product-details-page .page-preloader').css('display','none'),e.finish(30);case 33:case'end':return e.stop();}},e,this,[[6,22,30,33]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#product-details-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize')},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=null,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex=-1,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray=[],$('#product-details-quantity').get(0).ej2_instances[0].destroy(),$('#product-details-review').get(0).ej2_instances[0].destroy(),$('#product-details-share').get(0).ej2_instances[0].destroy(),$('#product-details-add-to-cart').get(0).ej2_instances[0].destroy(),$('#product-details-customise-product').get(0).ej2_instances[0].destroy(),$('#product-details-page .product-details-variation-option').each(function(e,t){t.ej2_instances[0].destroy()}),$('#rate-product-modal #rate-product-rater-widget').rateYo('destroy'),$('#rate-product-modal #rate-product-comment').val(''),$('#rate-product-modal #rate-product-comment').attr('disabled',!0)},backButtonClicked:function t(){var e=$('#app-main-navigator').get(0).pages;if(1<e.length){var a=$(e[e.length-2]).get(0);switch(a.id){case'app-main-page':4===$('#app-main-tabbar').get(0).getActiveTabIndex()?($('#app-main-navigator').get(0)._resetPageDisplay=!1,$('#products-page').get(0)._allowInfinitePageScroll=!0,$('#app-main-navigator').get(0).popPage()):$('#app-main-navigator').get(0).popPage();break;default:$('#app-main-navigator').get(0).popPage();}}else;},shareButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},t.message='check out this #ShopOakExclusive product',t.chooserTitle='share product with...',window.setTimeout(function(){if(-1!==utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex){var e=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,a=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[e];t.url=a.permalink,t.files=[a.image&&''!==a.image?a.image.src:utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.images[0].src]}else t.url=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.permalink,t.files=[utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.images[0].src];cordova.plugins.clipboard.copy(t.message+' | '+t.url,function(){window.plugins.toast.showWithOptions({message:'shared message copied to clipboard',duration:3e3,position:'center',styling:{cornerRadius:0,opacity:1,backgroundColor:'#3F51B5',textColor:'#FFFFFF',textSize:14}})},function(){}),window.plugins.socialsharing.shareWithOptions(t,function(){},function(){})},0);case 4:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),rateButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,$('#product-details-page .page-preloader').css('display','block'),e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 5:t=e.sent.userDetails,e.next=20;break;case 8:return e.prev=8,e.t0=e['catch'](2),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3500,a.content='Please sign in to rate this product',a.dataBind(),a.show(),$('#product-details-page .page-preloader').css('display','none'),e.abrupt('return');case 20:if(navigator.connection.type!==Connection.NONE){e.next=31;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to rate this product',o.dataBind(),o.show(),$('#product-details-page .page-preloader').css('display','none'),e.abrupt('return');case 31:return e.prev=31,$('#product-details-page .modal').css('display','table'),e.next=35,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{status:'completed',customer:t.id,product:utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.id}}));case 35:if(s=e.sent,0!==s.length){e.next=38;break}throw'error';case 38:e.next=51;break;case 40:return e.prev=40,e.t1=e['catch'](31),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3500,n.content='Sorry, you need to have purchased this product before it can be rated',n.dataBind(),n.show(),e.abrupt('return');case 51:return e.prev=51,$('#product-details-page .page-preloader').css('display','none'),$('#product-details-page .modal').css('display','none'),e.finish(51);case 55:return $('#rate-product-modal #rate-product-cancel-button').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('#rate-product-modal').get(0).hide();case 2:case'end':return e.stop();}},e,this)})),$('#rate-product-modal #rate-product-rate-button').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#rate-product-modal').get(0).hide();case 3:return $('#loader-modal-message').html('Sending User Review...'),e.next=6,$('#loader-modal').get(0).show();case 6:return e.next=8,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/products/reviews',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify({product_id:utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.id,status:'hold',reviewer:t.first_name,reviewer_email:t.email,review:$('#rate-product-modal #rate-product-comment').val().trim()+' ',rating:$('#rate-product-modal #rate-product-rater-widget').rateYo('rating'),verified:!0})}));case 8:return $('#rate-product-modal #rate-product-rater-widget').rateYo('rating',0),$('#rate-product-modal #rate-product-comment').val(''),$('#rate-product-modal #rate-product-comment').attr('disabled',!0),e.next=13,$('#loader-modal').get(0).hide();case 13:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='success-ej2-toast',a.timeOut=3500,a.content='Thank you. Your product review has been received',a.dataBind(),a.show(),e.next=37;break;case 23:return e.prev=23,e.t0=e['catch'](0),e.next=27,$('#loader-modal').get(0).hide();case 27:return e.next=29,$('#rate-product-modal').get(0).show();case 29:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3500,o.content='Error. Your product review could not be sent. Please retry',o.dataBind(),o.show();case 37:return e.prev=37,e.finish(37);case 39:return e.next=41,$('#rate-product-modal').get(0).hide();case 41:case'end':return e.stop();}},e,this,[[0,23,37,39]])})),e.next=59,$('#rate-product-modal').get(0).show();case 59:case'end':return e.stop();}},e,this,[[2,8],[31,40,51,55]])}));return function t(){return e.apply(this,arguments)}}(),pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#product-details-page #product-details-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('#product-details-page #product-details-add-to-cart').attr('disabled',!0),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop(),e.prev=6,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProductVariations(),e.next=10,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.loadProduct();case 10:return a=e.sent,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.displayProductDetails(a[0]);case 13:e.next=22;break;case 15:e.prev=15,e.t0=e['catch'](6),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Refresh to try again',o.dataBind(),o.show();case 22:return e.prev=22,$('#product-details-page #product-details-page-pull-hook').removeAttr('disabled'),$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),t(),e.finish(22);case 27:case'end':return e.stop();}},e,this,[[6,15,22,27]])}));return function t(){return e.apply(this,arguments)}}(),loadProduct:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],navigator.connection.type===Connection.NONE&&($('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='default-ej2-toast',a.timeOut=3e3,a.content='Connect to the Internet to see updated product details',a.dataBind(),a.show()),$('#app-main-navigator').get(0).topPage.data.product?(o=$('#app-main-navigator').get(0).topPage.data.product,(!o.regular_price||''==o.regular_price)&&(o.regular_price='0.00'),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=o,t.push(Promise.resolve(o))):t.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/products/'+jQuery('#app-main-navigator').get(0).topPage.data.productId),type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0})).then(function(t){t.regular_price&&''!=t.regular_price||(t.regular_price='0.00'),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails=t,e(t)}).catch(function(e){t(e)})})),e.abrupt('return',Promise.all(t));case 4:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),loadProductVariations:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=null,a=$('#app-main-navigator').get(0).topPage.data.product?$('#app-main-navigator').get(0).topPage.data.product.id:jQuery('#app-main-navigator').get(0).topPage.data.productId,t.push(new Promise(function(e,t){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/products/'+a+'/variations'),type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{page:1,per_page:99,status:'publish'}})).then(function(t){t=t.map(function(e){return e._variationValue=e.attributes.map(function(e){return e.option}).join(''),e}),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray=t,e(t)}).catch(function(e){t(e)})})),e.abrupt('return',Promise.all(t));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayProductDetails:function(){var e=Math.floor,t=Math.ceil,a=Math.abs,o=_asyncToGenerator(regeneratorRuntime.mark(function o(s){var n,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for($('#product-details-page .e-card-image').css('background-image','url("'+s.images[0].src+'")'),!0===s.on_sale&&$('#product-details-page .e-card-image').html('\n                <span class="e-badge e-badge-danger" style="float: right; clear: both; \n                                                    background-color: transparent; color: #d64113;\n                                                    border: 1px #d64113 solid; font-size: 0.6em;">\n                                                    '+t(100*(a(kendo.parseFloat(s.price)-kendo.parseFloat(s.regular_price))/kendo.parseFloat('0.00'===s.regular_price?s.price:s.regular_price)))+'% OFF\n                 </span>'),$('#product-details-page .e-card-title').html(''+s.name),$('#product-details-page .product-details-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(s.price),'n2')),!0===s.on_sale?($('#product-details-page .product-details-regular-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(s.regular_price),'n2')),$('#product-details-page .product-details-regular-price').css('visibility','visible'),$('#product-details-quantity').get(0).ej2_instances[0].cssClass='product-details-quantity-class sales',$('#product-details-quantity').get(0).ej2_instances[0].dataBind()):($('#product-details-page .product-details-regular-price').css('visibility','collapse'),$('#product-details-quantity').get(0).ej2_instances[0].cssClass='product-details-quantity-class',$('#product-details-quantity').get(0).ej2_instances[0].dataBind()),$('#product-details-quantity').get(0).ej2_instances[0].value=1,$('#product-details-quantity').get(0).ej2_instances[0].dataBind(),$('#product-details-page .product-details-description').html(''+s.short_description),$('#product-details-page .product-details-variation-option').each(function(e,t){t.ej2_instances[0].destroy()}),$('#product-details-page .product-details-variations').removeClass('expandable-content'),n='',i=0;i<s.attributes.length;i++)n+='<div class="col-xs-4" style="padding-right: 5px; padding-left: 5px;">\n                    <select name="'+s.attributes[i].name+'" class="product-details-variation-option">\n                        '+s.attributes[i].options.map(function(e){return'<option value="'+e+'">'+e+'</option>'}).join('')+'\n                    </select>\n                </div>';$('#product-details-page .product-details-variations').html(n),$('#product-details-page .product-details-variation-option').each(function(e,t){0<s.default_attributes.length&&$('option[value="'+s.default_attributes[e].option+'"]',t).attr('selected',!0),new ej.dropdowns.DropDownList({cssClass:'product-details-variation-class',placeholder:s.attributes[e].name,floatLabelType:'Always',change:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a='',$('#product-details-page .product-details-variation-option').each(function(e,t){a+=t.ej2_instances[0].value}),o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray.findIndex(function(e){return a===e._variationValue}),utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex=o,-1!==utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex&&(s=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[o],s.image&&''!==s.image&&$('#product-details-page .e-card-image').css('background-image','url("'+s.image.src+'")'),s.price&&''!==s.price&&$('#product-details-page .product-details-price').html('&#x20a6;'+kendo.toString(kendo.parseFloat(s.price),'n2'))),e();case 6:case'end':return t.stop();}},t,this)})),0)}));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()}).appendTo(t)}),$('#product-details-page .product-details-variations').addClass('expandable-content'),$('#product-details-page .product-details-rating').html('\n            '+(0<e(kendo.parseFloat(s.average_rating))?'<ons-icon icon="md-star" fixed-width></ons-icon>'.repeat(e(kendo.parseFloat(s.average_rating))):'<ons-icon icon="md-star-outline" style="color: lightgray" fixed-width></ons-icon>'.repeat(5))+'\n                <span style="display: inline-block; color: gray;">\n                '+(0<e(kendo.parseFloat(s.average_rating))?'('+s.rating_count+')':'')+'\n                </span>\n            '),$('#product-details-page .product-details-more-description').html('\n            '+s.description),$('#product-details-page .product-details-dimensions').html('\n            <span class="list-item__subtitle" style="display: block">length - '+(s.dimensions.length&&''!=s.dimensions.length?''+s.dimensions.length:'(Not Available)')+'</span>\n            <span class="list-item__subtitle" style="display: block">width - '+(s.dimensions.width&&''!=s.dimensions.width?''+s.dimensions.width:'(Not Available)')+'</span>\n            <span class="list-item__subtitle" style="display: block">height - '+(s.dimensions.height&&''!=s.dimensions.height?''+s.dimensions.height:'(Not Available)')+'</span>'),$('#product-details-page .product-details-weight').html(''+(s.weight&&''!=s.weight?''+s.weight:'(Not Available)'));case 19:case'end':return o.stop();}},o,this)}));return function e(){return o.apply(this,arguments)}}(),customiseButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3500,t.content='Please connect to the Internet to customise product',t.dataBind(),t.show(),e.abrupt('return');case 10:window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t='',-1===utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex?t=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.permalink:(a=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[a],t=o.permalink),e.next=4,$('#app-main-navigator').get(0).pushPage('customise-product-page.html');case 4:return e.next=6,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.loadProductCustomisation(t);case 6:case'end':return e.stop();}},e,this)})),0);case 11:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),addToCartButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#product-details-page #product-details-add-to-cart').attr('disabled',!0),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].start(),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d,l,c,g,u,m,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a={cartData:{}},e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 5:t=e.sent.cart,e.next=10;break;case 8:e.prev=8,e.t0=e['catch'](2);case 10:if(-1===utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex){e.next=36;break}for(o=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductVariationIndex,s=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.productVariationsArray[o],a.cartData.variation_id=s.id,n=new URLSearchParams(s.permalink.split('?')[1]),a.cartData.variation={},i=!0,r=!1,p=void 0,e.prev=19,d=n[Symbol.iterator]();!(i=(l=d.next()).done);i=!0)c=l.value,g=_slicedToArray(c,2),u=g[0],m=g[1],a.cartData.variation[u]=m;e.next=27;break;case 23:e.prev=23,e.t1=e['catch'](19),r=!0,p=e.t1;case 27:e.prev=27,e.prev=28,!i&&d.return&&d.return();case 30:if(e.prev=30,!r){e.next=33;break}throw p;case 33:return e.finish(30);case 34:return e.finish(27);case 35:a.productVariation=s;case 36:return a.cartData.product_id=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails.id,a.cartData.quantity=$('#product-details-quantity').get(0).ej2_instances[0].value,a.product=utopiasoftware[utopiasoftware_app_namespace].controller.productDetailsPageViewModel.currentProductDetails,a.uid=Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine),e.prev=40,t.push(a),e.next=44,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 44:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),h=$('.timed-page-toast').get(0).ej2_instances[0],h.cssClass='success-ej2-toast',h.timeOut=2e3,h.content='Product has been added to your cart',h.dataBind(),h.show(),e.next=64;break;case 54:e.prev=54,e.t2=e['catch'](40),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),f=$('.timed-page-toast').get(0).ej2_instances[0],f.cssClass='error-ej2-toast',f.timeOut=3500,f.content='Error adding product to your cart. Try again',f.dataBind(),f.show();case 64:return e.prev=64,$('#product-details-page #product-details-add-to-cart').removeAttr('disabled'),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#product-details-page #product-details-add-to-cart').get(0).ej2_instances[0].stop(),e.finish(64);case 70:case'end':return e.stop();}},e,this,[[2,8],[19,23,27,35],[28,,30,34],[40,54,64,70]])})),0);case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},customiseProductPageViewModel:{currentCustomisationUrl:'',currentCustomisationCartKey:null,customisationPageLoadCount:0,cartsQueue:[],pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.backButtonClicked,$('#customise-product-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.pagePullHookAction,window.addEventListener('message',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.receiveMessageListener,!1),$('#customise-product-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#customise-product-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}});try{new ej.buttons.Button({}).appendTo('#customise-product-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#customise-product-add-to-cart')}catch(e){}finally{}case 8:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#customise-product-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl='',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey=null,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount=0,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue=[],window.removeEventListener('message',utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.receiveMessageListener,!1),$('#customise-product-cancel').get(0).ej2_instances[0].destroy(),$('#customise-product-add-to-cart').get(0).ej2_instances[0].destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},deviceOfflineListener:function t(){$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All');var e=$('.page-toast').get(0).ej2_instances[0];e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to customise product',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},receiveMessageListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if('https://shopoakexclusive.com'===t.origin){e.next=2;break}return e.abrupt('return');case 2:if('page ready'!==t.data){e.next=8;break}return utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount+=1,$('#customise-product-page .page-preloader').css('display','none'),e.abrupt('return');case 8:a=JSON.parse(t.data),Array.isArray(a)?utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.push({}):utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.push(a),2<utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.length&&utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue.shift(),window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.saveCustomisedProductToCart,0),$('#customise-product-page #customise-product-add-to-cart').removeAttr('disabled'),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop();case 16:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#customise-product-page .page-preloader').css('display','block'),$('#customise-product-page #customise-product-add-to-cart').attr('disabled',!0),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].stop(),$('#customise-product-page #customise-product-page-iframe-container .modal').css('display','none'),$('#customise-product-page #customise-product-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=8,e.next=11,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.loadProductCustomisation(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey);case 11:e.next=20;break;case 13:e.prev=13,e.t0=e['catch'](8),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 20:return e.prev=20,window.setTimeout(function(){$('#customise-product-page #customise-product-page-pull-hook').removeAttr('disabled'),t()},2e3),e.finish(20);case 23:case'end':return e.stop();}},e,this,[[8,13,20,23]])}));return function t(){return e.apply(this,arguments)}}(),loadProductCustomisation:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl,a=arguments[1],o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3500,o.content='Please connect to the Internet to customise product and Pull Down to refresh',o.dataBind(),o.show(),e.abrupt('return');case 10:return $('#customise-product-page .page-preloader').css('display','block'),a?0>t.indexOf('?')?$('#customise-product-page #customise-product-page-iframe').attr('src',t+('?cart_item_key='+window.encodeURIComponent(a))):$('#customise-product-page #customise-product-page-iframe').attr('src',t+('&cart_item_key='+window.encodeURIComponent(a))):$('#customise-product-page #customise-product-page-iframe').attr('src',t),utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl=t,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey=a,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.customisationPageLoadCount=0,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue=[],e.abrupt('return',!0);case 17:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),saveCustomisedProductToCart:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue[0],a=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.cartsQueue[1],e.t0=regeneratorRuntime.keys(a);case 3:if((e.t1=e.t0()).done){e.next=58;break}if(o=e.t1.value,t[o]){e.next=56;break}return s=a[o],n=[],i={cartData:{}},e.prev=9,e.next=12,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 12:n=e.sent.cart,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey&&(r=n.findIndex(function(e){return e.anon_cart_key===utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey}),n.splice(r,1)),e.next=18;break;case 16:e.prev=16,e.t2=e['catch'](9);case 18:return i.cartData.product_id=s.product_id,i.cartData.quantity=s.quantity,i.cartData.variation_id=s.variation_id,i.cartData.variation=s.variation,i.cartData.cart_item_data={fpd_data:s.fpd_data},i.anon_cart_key=s.key,i.product_name=s.product_name,i.customisationUrl=utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationUrl,i.uid=Random.uuid4(utopiasoftware[utopiasoftware_app_namespace].randomisationEngine),e.prev=27,n.push(i),e.next=31,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:n},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 31:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='success-ej2-toast',p.timeOut=2e3,p.content='Customised product has been added to your cart',p.dataBind(),p.show(),e.next=51;break;case 41:e.prev=41,e.t3=e['catch'](27),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),d=$('.timed-page-toast').get(0).ej2_instances[0],d.cssClass='error-ej2-toast',d.timeOut=3500,d.content='Error adding customised product to your cart. Try again',d.dataBind(),d.show();case 51:return e.prev=51,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey&&(utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.currentCustomisationCartKey=s.key),$('#customise-product-page #customise-product-page-iframe-container .modal').css('display','none'),e.finish(51);case 55:return e.abrupt('break',58);case 56:e.next=3;break;case 58:case'end':return e.stop();}},e,this,[[9,16],[27,41,51,55]])}));return function t(){return e.apply(this,arguments)}}(),addToCartButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='default-ej2-toast',t.timeOut=3500,t.content='Please connect to the Internet to add customised product to cart',t.dataBind(),t.show(),e.abrupt('return');case 10:$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].cssClass='',$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].dataBind(),$('#customise-product-page #customise-product-add-to-cart').get(0).ej2_instances[0].start(),$('#customise-product-page #customise-product-page-iframe-container .modal').css('display','table'),$('#customise-product-page #customise-product-page-iframe').get(0).contentWindow.utopiasoftware_addUsage();case 15:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},viewCartPageViewModel:{pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.backButtonClicked,$('#view-cart-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.pagePullHookAction,$('#view-cart-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#view-cart-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}});try{new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#view-cart-checkout')}catch(e){$('.page-toast').get(0).ej2_instances[0].hide('All'),o=$('.page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.content='Sorry, an error occurred. Pull down to refresh',o.dataBind(),o.show()}case 7:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#view-cart-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize')},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#view-cart-checkout').get(0).ej2_instances[0].destroy(),$('#view-cart-page .view-cart-edit-button').each(function(e,t){t.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-remove-button').each(function(e,t){t.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-quantity-input').each(function(e,t){t.ej2_instances[0].destroy()})},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#view-cart-page #view-cart-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('#view-cart-page #view-cart-checkout').attr('disabled',!0),$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].dataBind(),$('#view-cart-page #view-cart-checkout').get(0).ej2_instances[0].stop(),e.prev=6,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();case 9:e.next=18;break;case 11:e.prev=11,e.t0=e['catch'](6),a=$('.page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.content='Sorry, an error occurred. Refresh to try again',a.dataBind(),a.show();case 18:return e.prev=18,$('#view-cart-page #view-cart-page-pull-hook').removeAttr('disabled'),$('#view-cart-page #view-cart-checkout').removeAttr('disabled'),$('#view-cart-page .page-preloader').css('display','none'),t(),e.finish(18);case 24:case'end':return e.stop();}},e,this,[[6,11,18,24]])}));return function t(){return e.apply(this,arguments)}}(),displayUserCart:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a='',e.prev=1,e.prev=2,e.t0=t,e.t0){e.next=8;break}return e.next=7,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 7:e.t0=e.sent.cart;case 8:t=e.t0,e.next=14;break;case 11:e.prev=11,e.t1=e['catch'](2),t=[];case 14:if(0!==t.length){e.next=24;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Your cart is empty. Go order some products!',o.dataBind(),o.show(),e.abrupt('return');case 24:for($('#view-cart-page .view-cart-edit-button').each(function(e,t){t.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-remove-button').each(function(e,t){t.ej2_instances[0].destroy()}),$('#view-cart-page .view-cart-quantity-input').each(function(e,t){t.ej2_instances[0].destroy()}),s=0;s<t.length;s++)a+='<div class="col-xs-12" style="border-bottom: 1px lightgray solid" \n                            data-utopiasoftware-product-uid="'+t[s].uid+'">\n                        <div class="e-card e-card-horizontal">',t[s].anon_cart_key?a+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: url(\''+t[s].cartData.cart_item_data.fpd_data.fpd_product_thumbnail+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+t[s].product_name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(t[s].cartData.quantity*kendo.parseFloat(t[s].cartData.cart_item_data.fpd_data.fpd_product_price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">\n                                <button type="button" class="view-cart-edit-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;" \n                                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                                        viewCartPageViewModel.\n                                        editCartItemButtonClicked(\''+t[s].customisationUrl+'\', \n                                        \''+t[s].anon_cart_key+'\')"></button>\n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;" \n                                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                                        viewCartPageViewModel.deleteCartItemButtonClicked(\''+t[s].uid+'\')"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" \n                                value="'+t[s].cartData.quantity+'" \n                                data-utopiasoftware-product-uid="'+t[s].uid+'">\n                            </div>\n                            </div>\n                            </div>':t[s].productVariation?a+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: \n                            url(\''+(t[s].productVariation.image&&''!==t[s].productVariation.image?t[s].productVariation.image.src:t[s].product.images[0].src)+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+t[s].product.name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(t[s].cartData.quantity*kendo.parseFloat(t[s].productVariation.price&&''!==t[s].productVariation.price?t[s].productVariation.price:t[s].product.price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">\n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;" \n                                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                                        viewCartPageViewModel.deleteCartItemButtonClicked(\''+t[s].uid+'\')"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" \n                                value="'+t[s].cartData.quantity+'" \n                                data-utopiasoftware-product-uid="'+t[s].uid+'">\n                            </div>\n                            </div>\n                            </div>':!t[s].productVariation&&(a+='<div class="e-card-image" style="-webkit-flex-basis: auto; flex-basis: auto; width: 30%;\n                            min-height: 100%; \n                            background-image: url(\''+t[s].product.images[0].src+'\');">\n                            </div>\n                            <div class="e-card-stacked" style="-webkit-flex-basis: auto; flex-basis: auto; width: 70%">\n                            <div class="e-card-header" style="padding: 0">\n                            <div class="e-card-header-caption"  style="padding-left: 3px; padding-right: 5px">\n                            <div class="e-card-sub-title" style="font-size: 14px; text-align: center; text-transform: capitalize">\n                                '+t[s].product.name+'\n                            </div>\n                            <div class="e-card-sub-title" style="font-size: 11px; text-align: center; text-transform: capitalize">\n                                &#x20a6;'+kendo.toString(t[s].cartData.quantity*kendo.parseFloat(t[s].product.price),'n2')+'\n                            </div>\n                            </div>\n                            </div>\n                            <div class="e-card-content row" style="padding: 0;">\n                            <div class="col-xs-3">                          \n                            </div>\n                            <div class="col-xs-4">\n                                <button type="button" class="view-cart-remove-button"\n                                        style="background-color: #ffffff; color: #3f51b5; height: 10px;" \n                                        onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                                        viewCartPageViewModel.deleteCartItemButtonClicked(\''+t[s].uid+'\')"></button>\n                            </div>\n                            <div class="col-xs-5">\n                                <input class="view-cart-quantity-input" type="number" style="padding-top: 2px;" \n                                value="'+t[s].cartData.quantity+'" \n                                data-utopiasoftware-product-uid="'+t[s].uid+'">\n                            </div>\n                            </div>\n                            </div>'),a+='</div>\n                         </div>';$('#view-cart-page #view-cart-contents-container').html(a),$('#view-cart-page .view-cart-edit-button').each(function(e,t){new ej.buttons.Button({cssClass:'e-flat e-round',iconCss:'zmdi zmdi-edit utopiasoftware-icon-zoom-one-point-two',iconPosition:'Left'}).appendTo(t)}),$('#view-cart-page .view-cart-remove-button').each(function(e,t){new ej.buttons.Button({cssClass:'e-flat e-round',iconCss:'zmdi zmdi-delete utopiasoftware-icon-zoom-one-point-two'}).appendTo(t)}),$('#view-cart-page .view-cart-quantity-input').each(function(e,a){var o;new ej.inputs.NumericTextBox((o={value:a.value,cssClass:'view-cart-quantity-input-class',currency:null,decimals:0,floatLabelType:'Auto',format:'n',showSpinButton:!0,min:1,max:10,placeholder:' ',step:1,strictMode:!0,width:'60%'},_defineProperty(o,'value',1),_defineProperty(o,'change',function s(){var e=this.value,o=$(a).attr('data-utopiasoftware-product-uid');$('#view-cart-page .page-preloader').css('display','block'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function a(){var s,n,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=t.find(function(e){return e.uid===o}),s.cartData.quantity=e,a.next=5,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:t},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 5:return a.next=7,utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart(t);case 7:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='success-ej2-toast',n.timeOut=2e3,n.content='Product quantity updated',n.dataBind(),n.show(),a.next=27;break;case 17:a.prev=17,a.t0=a['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Product quantity not updated. Try again',i.dataBind(),i.show();case 27:return a.prev=27,$('#view-cart-page .page-preloader').css('display','none'),a.finish(27);case 30:case'end':return a.stop();}},a,this,[[0,17,27,30]])})),0)}),o)).appendTo(a)}),$('#view-cart-page #view-cart-total-price').html('&#x20a6;'+kendo.toString(utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.calculateCartTotalPrice(t),'n2'));case 33:return e.prev=33,e.finish(33);case 35:case'end':return e.stop();}},e,this,[[1,,33,35],[2,11]])}));return function t(){return e.apply(this,arguments)}}(),viewCartPage:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$('#app-main-navigator').get(0).bringPageTop('view-cart-page.html');case 3:return e.next=5,utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.displayUserCart();case 5:$('#view-cart-page #view-cart-checkout').removeAttr('disabled'),e.next=16;break;case 8:e.prev=8,e.t0=e['catch'](0),$('.page-toast').get(0).ej2_instances[0].hide('All'),t=$('.page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.content='Sorry, an error occurred. Pull down to refresh',t.dataBind(),t.show();case 16:return e.prev=16,$('#view-cart-page .page-preloader').css('display','none'),e.finish(16);case 19:case'end':return e.stop();}},e,this,[[0,8,16,19]])}));return function t(){return e.apply(this,arguments)}}(),calculateCartTotalPrice:function t(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return 0===e.length?0:e.reduce(function(e,t){if(t.anon_cart_key)return e+t.cartData.quantity*kendo.parseFloat(t.cartData.cart_item_data.fpd_data.fpd_product_price);return t.productVariation?e+t.cartData.quantity*kendo.parseFloat(t.productVariation.price&&''!==t.productVariation.price?t.productVariation.price:t.product.price):t.productVariation?void 0:e+t.cartData.quantity*kendo.parseFloat(t.product.price)},0)},deleteCartItemButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'';return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#view-cart-page-delete-cart-item-action-sheet #view-cart-page-delete-cart-item-no').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById('view-cart-page-delete-cart-item-action-sheet').hide();case 2:case'end':return e.stop();}},e,this)})),$('#view-cart-page-delete-cart-item-action-sheet #view-cart-page-delete-cart-item-yes').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,o,s,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,$('#view-cart-page .page-preloader').css('display','block'),e.next=5,document.getElementById('view-cart-page-delete-cart-item-action-sheet').hide();case 5:return e.prev=5,e.next=8,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 8:a=e.sent.cart,e.next=13;break;case 11:e.prev=11,e.t0=e['catch'](5);case 13:return o=a.findIndex(function(e){return t===e.uid}),-1!==o&&a.splice(o,1),e.next=17,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-cart',docType:'USER_CART',cart:a},utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 17:return s=$('#view-cart-page .col-xs-12[data-utopiasoftware-product-uid="'+t+'"]'),e.next=20,kendo.fx(s).expand('vertical').duration(250).reverse();case 20:$('#view-cart-page #view-cart-total-price').html('&#x20a6;'+kendo.toString(utopiasoftware[utopiasoftware_app_namespace].controller.viewCartPageViewModel.calculateCartTotalPrice(a),'n2')),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='default-ej2-toast',n.timeOut=2e3,n.content='Product has been deleted from your cart',n.dataBind(),n.show(),e.next=41;break;case 31:e.prev=31,e.t1=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Error deleting product from your cart. Try again',i.dataBind(),i.show();case 41:return e.prev=41,$('#view-cart-page .page-preloader').css('display','none'),e.finish(41);case 44:case'end':return e.stop();}},e,this,[[1,31,41,44],[5,11]])})),e.next=4,document.getElementById('view-cart-page-delete-cart-item-action-sheet').show();case 4:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editCartItemButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('#app-main-navigator').get(0).bringPageTop('customise-product-page.html');case 2:return e.next=4,utopiasoftware[utopiasoftware_app_namespace].controller.customiseProductPageViewModel.loadProductCustomisation(t,a);case 4:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),checkoutButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d,l,c,g,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 4:t=e.sent.userDetails,e.next=19;break;case 7:return e.prev=7,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3500,a.content='Please sign in to checkout your cart',a.dataBind(),a.show(),$('#app-main-navigator').get(0).pushPage('login-page.html'),e.abrupt('return');case 19:return e.prev=19,e.next=22,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 22:if(o=e.sent.cart,0!==o.length){e.next=25;break}throw'error';case 25:e.next=38;break;case 27:return e.prev=27,e.t1=e['catch'](19),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='default-ej2-toast',s.timeOut=3e3,s.content='Your cart is empty. Go order some products!',s.dataBind(),s.show(),e.abrupt('return');case 38:if(''!=t.billing.address_1){e.next=49;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3500,n.content='Please update your billing address to checkout your cart',n.dataBind(),n.show(),$('#app-main-navigator').get(0).pushPage('billing-info-page.html'),e.abrupt('return');case 49:if(navigator.connection.type!==Connection.NONE){e.next=59;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3e3,i.content='Connect to the Internet to checkout your cart',i.dataBind(),i.show(),e.abrupt('return');case 59:return $('#loader-modal-message').html('Preparing Checkout...'),$('#loader-modal').get(0).show(),r={status:'pending',currency:'NGN',customer_id:t.id,billing:t.billing,shipping:t.shipping,line_items:[]},e.prev=62,e.next=65,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 65:for(p=e.sent.cart,d=0;d<p.length;d++){if(r.line_items[d]=p[d].cartData,p[d].product?(r.line_items[d].name=p[d].product.name,r.line_items[d].subtotal=''+kendo.parseFloat(p[d].product.price)*r.line_items[d].quantity,r.line_items[d].total=''+kendo.parseFloat(p[d].product.price)*r.line_items[d].quantity):r.line_items[d].name=p[d].product_name,r.line_items[d].meta_data=[],p[d].cartData.variation_id)for(l in p[d].cartData.cart_item_data||(r.line_items[d].subtotal=''+kendo.parseFloat(p[d].productVariation.price)*r.line_items[d].quantity,r.line_items[d].total=''+kendo.parseFloat(p[d].productVariation.price)*r.line_items[d].quantity),p[d].cartData.variation)r.line_items[d].meta_data.push({key:l.split('_')[1],value:p[d].cartData.variation[l]});p[d].cartData.cart_item_data&&(r.line_items[d].subtotal=''+kendo.parseFloat(p[d].cartData.cart_item_data.fpd_data.fpd_product_price)*r.line_items[d].quantity,r.line_items[d].total=''+kendo.parseFloat(p[d].cartData.cart_item_data.fpd_data.fpd_product_price)*r.line_items[d].quantity,r.line_items[d].meta_data.push({key:'_fpd_data',value:p[d].cartData.cart_item_data.fpd_data.fpd_product},{key:'_fpd_print_order',value:p[d].cartData.cart_item_data.fpd_data.fpd_print_order}),delete r.line_items[d].cart_item_data)}return e.next=69,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(r)}));case 69:if(r=e.sent,c=$('#app-main-navigator').get(0).pages,g=c.findIndex(function(e,t){return'checkout-page'===$(c[t]).get(0).id}),!(-1<g)){e.next=75;break}return e.next=75,$('#app-main-navigator').get(0).removePage(g);case 75:return e.next=77,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:r}});case 77:e.next=90;break;case 79:e.prev=79,e.t2=e['catch'](62),e.t2=JSON.parse(e.t2.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),u=$('.timed-page-toast').get(0).ej2_instances[0],u.cssClass='error-ej2-toast',u.timeOut=3e3,u.content='Checkout failed. '+(e.t2.message||''),u.dataBind(),u.show();case 90:return e.prev=90,$('#loader-modal').get(0).hide(),e.finish(90);case 93:case'end':return e.stop();}},e,this,[[1,7],[19,27],[62,79,90,93]])}));return function t(){return e.apply(this,arguments)}}()},profilePageViewModel:{profileFormValidator:null,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.backButtonClicked,utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator=$('#profile-page #profile-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('field:error',function(e){var t=$('#profile-page #profile-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('field:success',function(e){var t=$('#profile-page #profile-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidated),$('#profile-page .content').on('scroll',utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.scrollAndResizeEventListener),e.prev=9,$('#profile-form ons-input',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopLeft',opensOn:'Custom'}).appendTo($('#profile-page #profile-form').get(0))}),new ej.buttons.Button({}).appendTo('#profile-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#profile-update'),e.next=15,utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.displayProfileContent();case 15:e.next=19;break;case 17:e.prev=17,e.t0=e['catch'](9);case 19:return e.prev=19,e.finish(19);case 21:case'end':return e.stop();}},e,this,[[9,17,19,21]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#profile-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.addEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.scrollAndResizeEventListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#profile-page #profile-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.reset(),window.removeEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.scrollAndResizeEventListener,!1);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#profile-page #profile-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#profile-page #profile-cancel').get(0).ej2_instances[0].destroy(),$('#profile-page #profile-update').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},scrollAndResizeEventListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#profile-page #profile-form ons-input').each(function(e,t){document.getElementById('profile-form').ej2_instances[e].refresh(t)})},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),updateButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.profilePageViewModel.profileFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),profileFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to update your profile',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#profile-page #profile-update').attr('disabled',!0),$('#profile-page #profile-update').get(0).ej2_instances[0].cssClass='',$('#profile-page #profile-update').get(0).ej2_instances[0].dataBind(),$('#profile-page #profile-update').get(0).ej2_instances[0].start(),$('#profile-page .modal').css('display','table'),a=[],o=null,e.prev=17,e.next=20,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 20:return s=e.sent.userDetails,n=s.id,i=s.password,s.first_name=$('#profile-page #profile-form #profile-first-name').val().trim(),s.last_name=$('#profile-page #profile-form #profile-last-name').val().trim(),s.billing||(s.billing={}),s.billing.email=$('#profile-page #profile-form #profile-email').val().trim(),s.billing.first_name=s.first_name,s.billing.last_name=s.last_name,s.billing.phone=$('#profile-page #profile-form #profile-phone-number').val().trim(),s.billing.phone.startsWith('0')&&(s.billing.phone=s.billing.phone.replace(/0/i,'+234')),delete s.id,delete s.password,a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/customers/'+n),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(s)}))),o=Promise.all(a),e.next=37,o;case 37:return r=e.sent,r[0].password=i,e.next=41,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:r[0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 41:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='success-ej2-toast',p.timeOut=3e3,p.content='User profile updated',p.dataBind(),p.show(),e.next=62;break;case 51:e.prev=51,e.t0=e['catch'](17),e.t0=JSON.parse(e.t0.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),d=$('.timed-page-toast').get(0).ej2_instances[0],d.cssClass='error-ej2-toast',d.timeOut=3e3,d.content='User profile update failed. '+(e.t0.message||''),d.dataBind(),d.show();case 62:return e.prev=62,$('#profile-page #profile-update').removeAttr('disabled'),$('#profile-page #profile-update').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#profile-page #profile-update').get(0).ej2_instances[0].dataBind(),$('#profile-page #profile-update').get(0).ej2_instances[0].stop(),$('#profile-page .modal').css('display','none'),e.finish(62);case 69:return e.abrupt('return',o);case 70:case'end':return e.stop();}},e,this,[[17,51,62,69]])}));return function t(){return e.apply(this,arguments)}}(),displayProfileContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:t=e.sent.userDetails,$('#profile-page #profile-form #profile-email').val(t.email),$('#profile-page #profile-form #profile-first-name').val(t.first_name||''),$('#profile-page #profile-form #profile-last-name').val(t.last_name||''),$('#profile-page #profile-form #profile-phone-number').val(t.billing&&t.billing.phone?t.billing.phone:'');case 8:return e.prev=8,$('#profile-page .page-preloader').css('display','none'),$('#profile-page .modal').css('display','none'),$('#profile-page #profile-update').removeAttr('disabled'),e.finish(8);case 13:case'end':return e.stop();}},e,this,[[0,,8,13]])}));return function t(){return e.apply(this,arguments)}}()},changePasswordPageViewModel:{changePasswordFormValidator:null,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:$('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.backButtonClicked,utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator=$('#change-password-page #change-password-form').parsley(),utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.on('field:error',function(e){var t=$('#change-password-page #change-password-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.on('field:success',function(e){var t=$('#change-password-page #change-password-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidated),$('#change-password-page .content').on('scroll',utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.scrollAndResizeEventListener);try{$('#change-password-form ons-input',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopLeft',opensOn:'Custom'}).appendTo($('#change-password-page #change-password-form').get(0))}),new ej.buttons.Button({isToggle:!0,cssClass:'e-flat e-small e-round',iconCss:'zmdi zmdi-eye',iconPosition:'Left'}).appendTo($('#change-password-view-button',a).get(0)),new ej.buttons.Button({}).appendTo('#change-password-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#change-password-update')}catch(e){}finally{$('#change-password-page .page-preloader').css('display','none'),$('#change-password-page .modal').css('display','none'),$('#change-password-page #change-password-update').removeAttr('disabled')}case 10:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#change-password-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.addEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.scrollAndResizeEventListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#change-password-page #change-password-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.reset(),window.removeEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.scrollAndResizeEventListener,!1);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#change-password-page #change-password-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#change-password-page #change-password-cancel').get(0).ej2_instances[0].destroy(),$('#change-password-page #change-password-update').get(0).ej2_instances[0].destroy(),$('#change-password-page #change-password-view-button').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},passwordVisibilityButtonClicked:function a(e,t){if(!$(e).hasClass('e-active')){$(document.getElementById(t)).attr('type','text');var o=e.ej2_instances[0];o.iconCss='zmdi zmdi-eye-off',o.dataBind()}else{$(document.getElementById(t)).attr('type','password');var s=e.ej2_instances[0];s.iconCss='zmdi zmdi-eye',s.dataBind()}},scrollAndResizeEventListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#change-password-page #change-password-form ons-input').each(function(e,t){document.getElementById('change-password-form').ej2_instances[e].refresh(t)})},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),updateButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.changePasswordPageViewModel.changePasswordFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),changePasswordFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to change password',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#change-password-page #change-password-update').attr('disabled',!0),$('#change-password-page #change-password-update').get(0).ej2_instances[0].cssClass='',$('#change-password-page #change-password-update').get(0).ej2_instances[0].dataBind(),$('#change-password-page #change-password-update').get(0).ej2_instances[0].start(),$('#change-password-page .modal').css('display','table'),a=[],o=null,e.prev=17,e.next=20,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 20:return s=e.sent.userDetails,e.prev=21,e.next=24,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(s.email+':'+jQuery('#change-password-current-password').val().trim()))},dataType:'json',timeout:24e4,processData:!1}));case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e['catch'](21),{responseText:JSON.stringify({message:'current password is incorrect.'})};case 29:return n=s.id,delete s.billing,delete s.shipping,s.password=$('#change-password-page #change-password-form #change-password-new-password').val().trim(),a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/customers/'+n),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(s)}))),o=Promise.all(a),e.next=37,o;case 37:return i=e.sent,i[0].password=$('#change-password-page #change-password-form #change-password-new-password').val().trim(),e.next=41,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:i[0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 41:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),r=$('.timed-page-toast').get(0).ej2_instances[0],r.cssClass='success-ej2-toast',r.timeOut=3e3,r.content='User password changed',r.dataBind(),r.show(),e.next=62;break;case 51:e.prev=51,e.t1=e['catch'](17),e.t1=JSON.parse(e.t1.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='error-ej2-toast',p.timeOut=3e3,p.content='User password change failed. '+(e.t1.message||''),p.dataBind(),p.show();case 62:return e.prev=62,$('#change-password-page #change-password-update').removeAttr('disabled'),$('#change-password-page #change-password-update').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#change-password-page #change-password-update').get(0).ej2_instances[0].dataBind(),$('#change-password-page #change-password-update').get(0).ej2_instances[0].stop(),$('#change-password-page .modal').css('display','none'),e.finish(62);case 69:return e.abrupt('return',o);case 70:case'end':return e.stop();}},e,this,[[17,51,62,69],[21,26]])}));return function t(){return e.apply(this,arguments)}}()},billingInfoPageViewModel:{billingInfoFormValidator:null,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.backButtonClicked,utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator=$('#billing-info-page #billing-info-form').parsley(),$('#billing-info-page #billing-info-form #billing-info-country').parsley({value:function e(){return $('#billing-info-country').get(0).ej2_instances[0].value}}),$('#billing-info-page #billing-info-form #billing-info-state').parsley({value:function t(){var e=$('#billing-info-state').get(0).ej2_instances[0];return!0===e.enabled?e.value:' '}}),utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.on('field:error',function(e){var t=$('#billing-info-page #billing-info-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.on('field:success',function(e){var t=$('#billing-info-page #billing-info-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidated),$('#billing-info-page .content').on('scroll',utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.scrollAndResizeEventListener),e.prev=11,new ej.buttons.Button({}).appendTo('#billing-info-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#billing-info-update'),o=[],e.next=17,Promise.resolve($.ajax({url:'country-list.json',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}));case 17:return o=e.sent,$('#billing-info-form textarea, #billing-info-form ons-input, #billing-info-form #billing-info-country, #billing-info-form #billing-info-state',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopLeft',opensOn:'Custom'}).appendTo($('#billing-info-page #billing-info-form').get(0))}),new ej.dropdowns.DropDownList({cssClass:'billing-info-dropdownlist',dataSource:o,fields:{value:'code',text:'name'},placeholder:'Country',floatLabelType:'Auto',value:'NG',itemTemplate:'<span>${name}</span>',valueTemplate:'<span>${name}</span>'}).appendTo('#billing-info-country'),new ej.dropdowns.DropDownList({cssClass:'billing-info-dropdownlist',dataSource:o.find(function(e){return'NG'===e.code}).states,fields:{value:'code',text:'name'},placeholder:'State',floatLabelType:'Auto',itemTemplate:'<span>${name}</span>',valueTemplate:'<span>${name}</span>',select:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#billing-info-page #billing-info-form').get(0).ej2_instances[$('#billing-info-state').get(0)._utopiasoftware_validator_index].close()},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()}).appendTo('#billing-info-state'),e.next=23,utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.displayContent();case 23:e.next=27;break;case 25:e.prev=25,e.t0=e['catch'](11);case 27:return e.prev=27,e.finish(27);case 29:case'end':return e.stop();}},e,this,[[11,25,27,29]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#billing-info-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.addEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.scrollAndResizeEventListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#billing-info-page #billing-info-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.reset(),window.removeEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.scrollAndResizeEventListener,!1);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#billing-info-page #billing-info-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#billing-info-page #billing-info-country').get(0).ej2_instances[0].destroy(),$('#billing-info-page #billing-info-state').get(0).ej2_instances[0].destroy(),$('#billing-info-page #billing-info-cancel').get(0).ej2_instances[0].destroy(),$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},scrollAndResizeEventListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#billing-info-form textarea, #billing-info-form ons-input, #billing-info-form #billing-info-country, #billing-info-form #billing-info-state').each(function(e,t){document.getElementById('billing-info-form').ej2_instances[e].refresh(t)})},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),updateButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.billingInfoPageViewModel.billingInfoFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),billingInfoFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to update your billing address',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#billing-info-page #billing-info-update').attr('disabled',!0),$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].cssClass='',$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].dataBind(),$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].start(),$('#billing-info-page .modal').css('display','table'),a=[],o=null,e.prev=17,e.next=20,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 20:return s=e.sent.userDetails,n=s.id,i=s.password,s.billing||(s.billing={}),s.billing.email=s.email,s.billing.company=$('#billing-info-page #billing-info-company').val().trim(),s.billing.address_1=$('#billing-info-page #billing-info-address-1').val().trim(),s.billing.address_2=$('#billing-info-page #billing-info-address-2').val().trim(),s.billing.postcode=$('#billing-info-page #billing-info-postcode').val().trim(),s.billing.city=$('#billing-info-page #billing-info-city').val().trim(),s.billing.country=$('#billing-info-page #billing-info-country').get(0).ej2_instances[0].value,s.billing.state=$('#billing-info-page #billing-info-state').get(0).ej2_instances[0].value?$('#billing-info-page #billing-info-state').get(0).ej2_instances[0].value:'',delete s.id,delete s.password,a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/customers/'+n),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(s)}))),o=Promise.all(a),e.next=38,o;case 38:return r=e.sent,r[0].password=i,e.next=42,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:r[0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 42:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='success-ej2-toast',p.timeOut=3e3,p.content='User billing address updated',p.dataBind(),p.show(),e.next=63;break;case 52:e.prev=52,e.t0=e['catch'](17),e.t0=JSON.parse(e.t0.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),d=$('.timed-page-toast').get(0).ej2_instances[0],d.cssClass='error-ej2-toast',d.timeOut=3e3,d.content='User billing address update failed. '+(e.t0.message||''),d.dataBind(),d.show();case 63:return e.prev=63,$('#billing-info-page #billing-info-update').removeAttr('disabled'),$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].dataBind(),$('#billing-info-page #billing-info-update').get(0).ej2_instances[0].stop(),$('#billing-info-page .modal').css('display','none'),e.finish(63);case 70:return e.abrupt('return',o);case 71:case'end':return e.stop();}},e,this,[[17,52,63,70]])}));return function t(){return e.apply(this,arguments)}}(),displayContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:t=e.sent.userDetails,$('#billing-info-page #billing-info-form #billing-info-company').val(t.billing&&t.billing.company?t.billing.company:''),$('#billing-info-page #billing-info-form #billing-info-address-1').val(t.billing&&t.billing.address_1?t.billing.address_1:''),$('#billing-info-page #billing-info-form #billing-info-address-2').val(t.billing&&t.billing.address_2?t.billing.address_2:''),$('#billing-info-page #billing-info-form #billing-info-postcode').val(t.billing&&t.billing.postcode?t.billing.postcode:''),$('#billing-info-page #billing-info-form #billing-info-city').val(t.billing&&t.billing.city?t.billing.city:''),a=$('#billing-info-page #billing-info-form #billing-info-country').get(0).ej2_instances[0],a.removeEventListener('select'),a.value=t.billing&&t.billing.country&&''!==t.billing.country?t.billing.country:'NG',a.dataBind(),o=$('#billing-info-page #billing-info-form #billing-info-state').get(0).ej2_instances[0],o.dataSource=a.dataSource.find(function(e){return e.code===a.value}).states,o.dataBind(),o.value=t.billing&&t.billing.state&&''!==t.billing.state?t.billing.state:null,o.dataBind(),o.value?(o.enabled=!0,o.dataBind()):'NG'===a.value?(o.enabled=!0,o.dataBind()):(o.enabled=!1,o.dataBind());case 19:return e.prev=19,$('#billing-info-page .page-preloader').css('display','none'),$('#billing-info-page .modal').css('display','none'),$('#billing-info-page #billing-info-update').removeAttr('disabled'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.addEventListener('select',_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getDataByValue(t.value).states,o=$('#billing-info-page #billing-info-form #billing-info-state').get(0).ej2_instances[0],o.value=null,o.dataSource=a,0<a.length?o.enabled=!0:(o.enabled=!1,$('#billing-info-page #billing-info-form').get(0).ej2_instances[$('#billing-info-state').get(0)._utopiasoftware_validator_index].close()),o.dataBind();case 6:case'end':return e.stop();}},e,this)})),0);case 2:case'end':return e.stop();}},e,this)})));case 1:case'end':return e.stop();}},e,this)})),0),e.finish(19);case 25:case'end':return e.stop();}},e,this,[[0,,19,25]])}));return function t(){return e.apply(this,arguments)}}()},shippingInfoPageViewModel:{shippingInfoFormValidator:null,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.backButtonClicked,utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator=$('#shipping-info-page #shipping-info-form').parsley(),$('#shipping-info-page #shipping-info-form #shipping-info-country').parsley({value:function e(){return $('#shipping-info-country').get(0).ej2_instances[0].value}}),$('#shipping-info-page #shipping-info-form #shipping-info-state').parsley({value:function t(){var e=$('#shipping-info-state').get(0).ej2_instances[0];return!0===e.enabled?e.value:' '}}),utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.on('field:error',function(e){var t=$('#shipping-info-page #shipping-info-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.content=e.getErrorsMessages()[0],t.dataBind(),t.open(e.$element.get(0))}),utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.on('field:success',function(e){var t=$('#shipping-info-page #shipping-info-form').get(0).ej2_instances[e.$element.get(0)._utopiasoftware_validator_index];t.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.on('form:success',utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidated),$('#shipping-info-page .content').on('scroll',utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.scrollAndResizeEventListener),e.prev=11,new ej.buttons.Button({}).appendTo('#shipping-info-cancel'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#shipping-info-update'),o=[],e.next=17,Promise.resolve($.ajax({url:'country-list.json',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}));case 17:return o=e.sent,$('#shipping-info-form textarea, #shipping-info-form ons-input, #shipping-info-form #shipping-info-country, #shipping-info-form #shipping-info-state',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopLeft',opensOn:'Custom'}).appendTo($('#shipping-info-page #shipping-info-form').get(0))}),new ej.dropdowns.DropDownList({cssClass:'shipping-info-dropdownlist',dataSource:o,fields:{value:'code',text:'name'},placeholder:'Country',floatLabelType:'Auto',value:'NG',itemTemplate:'<span>${name}</span>',valueTemplate:'<span>${name}</span>'}).appendTo('#shipping-info-country'),new ej.dropdowns.DropDownList({cssClass:'shipping-info-dropdownlist',dataSource:o.find(function(e){return'NG'===e.code}).states,fields:{value:'code',text:'name'},placeholder:'State',floatLabelType:'Auto',itemTemplate:'<span>${name}</span>',valueTemplate:'<span>${name}</span>',select:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#shipping-info-page #shipping-info-form').get(0).ej2_instances[$('#shipping-info-state').get(0)._utopiasoftware_validator_index].close()},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()}).appendTo('#shipping-info-state'),e.next=23,utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.displayContent();case 23:e.next=27;break;case 25:e.prev=25,e.t0=e['catch'](11);case 27:return e.prev=27,e.finish(27);case 29:case'end':return e.stop();}},e,this,[[11,25,27,29]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){window.SoftInputMode.set('adjustResize'),$('#shipping-info-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.addEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.scrollAndResizeEventListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$('#shipping-info-page #shipping-info-form').get(0).ej2_instances.forEach(function(e){e.close()}),utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.reset(),window.removeEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.scrollAndResizeEventListener,!1);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#shipping-info-page #shipping-info-form').get(0).ej2_instances.forEach(function(e){e.destroy()}),$('#shipping-info-page #shipping-info-country').get(0).ej2_instances[0].destroy(),$('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].destroy(),$('#shipping-info-page #shipping-info-cancel').get(0).ej2_instances[0].destroy(),$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.destroy()},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},scrollAndResizeEventListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#shipping-info-form textarea, #shipping-info-form ons-input, #shipping-info-form #shipping-info-country, #shipping-info-form #shipping-info-state').each(function(e,t){document.getElementById('shipping-info-form').ej2_instances[e].refresh(t)})},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),updateButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:utopiasoftware[utopiasoftware_app_namespace].controller.shippingInfoPageViewModel.shippingInfoFormValidator.whenValidate();case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),shippingInfoFormValidated:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to update shipping information',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#shipping-info-page #shipping-info-update').attr('disabled',!0),$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].cssClass='',$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].dataBind(),$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].start(),$('#shipping-info-page .modal').css('display','table'),a=[],o=null,e.prev=17,e.next=20,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 20:return s=e.sent.userDetails,n=s.id,i=s.password,s.shipping||(s.shipping={}),s.shipping.first_name=$('#shipping-info-page #shipping-info-first-name').val().trim(),s.shipping.last_name=$('#shipping-info-page #shipping-info-last-name').val().trim(),s.shipping.company=$('#shipping-info-page #shipping-info-company').val().trim(),s.shipping.address_1=$('#shipping-info-page #shipping-info-address-1').val().trim(),s.shipping.address_2=$('#shipping-info-page #shipping-info-address-2').val().trim(),s.shipping.postcode=$('#shipping-info-page #shipping-info-postcode').val().trim(),s.shipping.city=$('#shipping-info-page #shipping-info-city').val().trim(),s.shipping.country=$('#shipping-info-page #shipping-info-country').get(0).ej2_instances[0].value,s.shipping.state=$('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].value?$('#shipping-info-page #shipping-info-state').get(0).ej2_instances[0].value:'',delete s.id,delete s.password,a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/customers/'+n),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(s)}))),o=Promise.all(a),e.next=39,o;case 39:return r=e.sent,r[0].password=i,e.next=43,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.saveData({_id:'user-details',docType:'USER_DETAILS',userDetails:r[0]},utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 43:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='success-ej2-toast',p.timeOut=3e3,p.content='Shipping information updated',p.dataBind(),p.show(),e.next=64;break;case 53:e.prev=53,e.t0=e['catch'](17),e.t0=JSON.parse(e.t0.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),d=$('.timed-page-toast').get(0).ej2_instances[0],d.cssClass='error-ej2-toast',d.timeOut=3e3,d.content='Shipping information update failed. '+(e.t0.message||''),d.dataBind(),d.show();case 64:return e.prev=64,$('#shipping-info-page #shipping-info-update').removeAttr('disabled'),$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].dataBind(),$('#shipping-info-page #shipping-info-update').get(0).ej2_instances[0].stop(),$('#shipping-info-page .modal').css('display','none'),e.finish(64);case 71:return e.abrupt('return',o);case 72:case'end':return e.stop();}},e,this,[[17,53,64,71]])}));return function t(){return e.apply(this,arguments)}}(),displayContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:t=e.sent.userDetails,$('#shipping-info-page #shipping-info-form #shipping-info-first-name').val(t.shipping&&t.shipping.first_name?t.shipping.first_name:''),$('#shipping-info-page #shipping-info-form #shipping-info-last-name').val(t.shipping&&t.shipping.last_name?t.shipping.last_name:''),$('#shipping-info-page #shipping-info-form #shipping-info-company').val(t.shipping&&t.shipping.company?t.shipping.company:''),$('#shipping-info-page #shipping-info-form #shipping-info-address-1').val(t.shipping&&t.shipping.address_1?t.shipping.address_1:''),$('#shipping-info-page #shipping-info-form #shipping-info-address-2').val(t.shipping&&t.shipping.address_2?t.shipping.address_2:''),$('#shipping-info-page #shipping-info-form #shipping-info-postcode').val(t.shipping&&t.shipping.postcode?t.shipping.postcode:''),$('#shipping-info-page #shipping-info-form #shipping-info-city').val(t.shipping&&t.shipping.city?t.shipping.city:''),a=$('#shipping-info-page #shipping-info-form #shipping-info-country').get(0).ej2_instances[0],a.removeEventListener('select'),a.value=t.shipping&&t.shipping.country&&''!==t.shipping.country?t.shipping.country:'NG',a.dataBind(),o=$('#shipping-info-page #shipping-info-form #shipping-info-state').get(0).ej2_instances[0],o.dataSource=a.dataSource.find(function(e){return e.code===a.value}).states,o.dataBind(),o.value=t.shipping&&t.shipping.state&&''!==t.shipping.state?t.shipping.state:null,o.dataBind(),o.value?(o.enabled=!0,o.dataBind()):'NG'===a.value?(o.enabled=!0,o.dataBind()):(o.enabled=!1,o.dataBind());case 21:return e.prev=21,$('#shipping-info-page .page-preloader').css('display','none'),$('#shipping-info-page .modal').css('display','none'),$('#shipping-info-page #shipping-info-update').removeAttr('disabled'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.addEventListener('select',_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getDataByValue(t.value).states,o=$('#shipping-info-page #shipping-info-form #shipping-info-state').get(0).ej2_instances[0],o.value=null,o.dataSource=a,0<a.length?o.enabled=!0:(o.enabled=!1,$('#shipping-info-page #shipping-info-form').get(0).ej2_instances[$('#shipping-info-state').get(0)._utopiasoftware_validator_index].close()),o.dataBind();case 6:case'end':return e.stop();}},e,this)})),0);case 2:case'end':return e.stop();}},e,this)})));case 1:case'end':return e.stop();}},e,this)})),0),e.finish(21);case 27:case'end':return e.stop();}},e,this,[[0,,21,27]])}));return function t(){return e.apply(this,arguments)}}()},checkoutPageViewModel:{chekoutOrder:null,countryArray:[],shoppingZonesArray:[],updateOrderBillingDetails:!1,updateOrderShippingDetails:!1,pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.backButtonClicked,$('#checkout-page .content').on('scroll',utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.scrollAndResizeEventListener),utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=$('#app-main-navigator').get(0).topPage.data.orderData,e.prev=6,new ej.navigations.Accordion({expandMode:'Single',expanded:utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.scrollAndResizeEventListener}).appendTo('#checkout-accordion'),new ej.dropdowns.DropDownList({cssClass:'shipping-method-dropdownlist',dataSource:[],fields:{value:'method_id',text:'title'},placeholder:'Shipping Method',floatLabelType:'Auto',enabled:!1,itemTemplate:'<span>${title}</span>',valueTemplate:'<span>${title}</span>'}).appendTo('#checkout-shipping-method-type'),new ej.dropdowns.DropDownList({cssClass:'payment-method-dropdownlist',dataSource:[],fields:{value:'id',text:'title'},placeholder:'Payment Method',floatLabelType:'Auto',enabled:!1,itemTemplate:'<span>${title}</span>',valueTemplate:'<span>${title}</span>'}).appendTo('#checkout-payment-method-type'),new ej.dropdowns.MultiSelect({cssClass:'payment-voucher-dropdownlist',dataSource:[],placeholder:'Payment Coupons',floatLabelType:'Auto',mode:'Box',showClearButton:!1,showDropDownIcon:!1,enabled:!1}).appendTo('#checkout-payment-vouchers'),new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#checkout-make-payment'),$('.utopiasoftware-checkout-failure',a).each(function(e,t){t._utopiasoftware_validator_index=e,new ej.popups.Tooltip({cssClass:'utopiasoftware-ej2-validation-tooltip',position:'TopCenter',opensOn:'Custom'}).appendTo(a.get(0))}),o=[],o.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/payment_gateways',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}))),o.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/shipping/zones',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}))),o.push(Promise.resolve($.ajax({url:'country-list.json',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}))),o.push(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.createRemoteCartFromOrder()),e.next=20,Promise.all(o);case 20:o=e.sent,o[0]=o[0].filter(function(e){return!0===e.enabled}),$('#checkout-payment-method-type').get(0).ej2_instances[0].dataSource=o[0],$('#checkout-payment-method-type').get(0).ej2_instances[0].dataBind(),utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.shoppingZonesArray=o[1],utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.countryArray=o[2],e.next=40;break;case 28:return e.prev=28,e.t0=e['catch'](6),e.next=32,$('#app-main-navigator').get(0).popPage();case 32:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.timeOut=3500,s.content='fatal error'===e.t0?'A serious error occurred. Please resign into your account':'Error preparing checkout. Please retry',s.dataBind(),s.show();case 40:return e.prev=40,$('#checkout-page .page-preloader').css('display','none'),$('#checkout-page .modal').css('display','none'),e.finish(40);case 44:case'end':return e.stop();}},e,this,[[6,28,40,44]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=$('#checkout-page #checkout-payment-method-type').length){e.next=2;break}return e.abrupt('return');case 2:if(t=$('#checkout-payment-method-type').get(0).ej2_instances[0],0!=t.dataSource.length){e.next=6;break}return window.setTimeout(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow,500),e.abrupt('return');case 6:return window.SoftInputMode.set('adjustResize'),window.addEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.scrollAndResizeEventListener,!1),$('#checkout-page .page-preloader').css('display','block'),$('#checkout-page .modal').css('display','table'),e.prev=10,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.displayContent();case 13:e.next=28;break;case 15:return e.prev=15,e.t0=e['catch'](10),$('#checkout-page .page-preloader').css('display','none'),$('#checkout-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3e3,a.content='Checkout error. Please retry',a.dataBind(),a.show(),e.abrupt('return');case 28:return e.prev=28,e.next=31,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.validateOrderCheckout();case 31:e.next=35;break;case 33:e.prev=33,e.t1=e['catch'](28);case 35:return e.prev=35,$('#checkout-page .page-preloader').css('display','none'),$('#checkout-page .modal').css('display','none'),e.finish(35);case 39:case'end':return e.stop();}},e,this,[[10,15],[28,33,35,39]])}));return function t(){return e.apply(this,arguments)}}(),pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener('resize',utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.scrollAndResizeEventListener,!1),$('#checkout-page').get(0).ej2_instances.forEach(function(e){e.close()});case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0].destroy(),$('#checkout-page #checkout-payment-method-type').get(0).ej2_instances[0].destroy(),$('#checkout-page #checkout-payment-vouchers').get(0).ej2_instances[0].destroy(),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].destroy(),$('#checkout-page #checkout-accordion').get(0).ej2_instances[0].destroy(),$('#checkout-page').get(0).ej2_instances.forEach(function(e){e.destroy()}),utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=null,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.countryArray=[],utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.shoppingZonesArray=[],utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderBillingDetails=!1,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderShippingDetails=!1},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},scrollAndResizeEventListener:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){$('#checkout-page .utopiasoftware-checkout-failure').each(function(e,t){document.getElementById('checkout-page').ej2_instances[e].refresh(t)})},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editPersonalDetailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$('#app-main-navigator').get(0).pages,a=t.findIndex(function(e,a){return'profile-page'===$(t[a]).get(0).id}),!(-1<a)){e.next=5;break}return e.next=5,$('#app-main-navigator').get(0).removePage(a);case 5:$('#app-main-navigator').get(0).pushPage('profile-page.html');case 6:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editBillingDetailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderBillingDetails=!0,t=$('#app-main-navigator').get(0).pages,a=t.findIndex(function(e,a){return'billing-info-page'===$(t[a]).get(0).id}),!(-1<a)){e.next=6;break}return e.next=6,$('#app-main-navigator').get(0).removePage(a);case 6:$('#app-main-navigator').get(0).pushPage('billing-info-page.html');case 7:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editShippingDetailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderShippingDetails=!0,t=$('#app-main-navigator').get(0).pages,a=t.findIndex(function(e,a){return'shipping-info-page'===$(t[a]).get(0).id}),!(-1<a)){e.next=6;break}return e.next=6,$('#app-main-navigator').get(0).removePage(a);case 6:$('#app-main-navigator').get(0).pushPage('shipping-info-page.html');case 7:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editShippingMethodButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){var e=$('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0];e.enabled=!0,e.dataBind()},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),editPaymentMethodButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.setTimeout(function(){var e=$('#checkout-page #checkout-payment-method-type').get(0).ej2_instances[0];e.enabled=!0,e.dataBind()},0);case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),applyCouponButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to apply coupon',t.dataBind(),t.show(),e.abrupt('return');case 10:if(e.prev=10,$('#checkout-page .modal').css('display','table'),''!==$('#checkout-page #checkout-payment-voucher-code').val().trim()){e.next=14;break}throw'error - no coupon code provided';case 14:return e.next=16,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/coupons',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{code:$('#checkout-page #checkout-payment-voucher-code').val().trim()}}));case 16:if(a=e.sent,0!=a.length){e.next=19;break}throw'error - no coupon found';case 19:return o=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),o.coupon_lines=o.coupon_lines.map(function(e){return{code:e.code}}),o.coupon_lines.push({code:a[0].code}),e.next=24,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+o.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(o)}));case 24:return o=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=o,$('#checkout-page #checkout-payment-voucher-code').val(''),e.next=29,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow();case 29:e.next=42;break;case 31:e.prev=31,e.t0=e['catch'](10),$('#checkout-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.timeOut=3e3,s.content='Coupon not applied. Invalid coupon code',s.dataBind(),s.show();case 42:case'end':return e.stop();}},e,this,[[10,31]])}));return function t(){return e.apply(this,arguments)}}(),addNoteButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to add shipping notes to the order',t.dataBind(),t.show(),e.abrupt('return');case 10:return e.prev=10,$('#checkout-page .modal').css('display','table'),a=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),a.customer_note=$('#checkout-page #checkout-payment-order-note-text').val().trim(),a.coupon_lines=a.coupon_lines.map(function(e){return{code:e.code}}),e.next=17,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+a.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(a)}));case 17:return a=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=a,$('#checkout-page #checkout-payment-order-note-text').val(''),e.next=22,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow();case 22:e.next=35;break;case 24:e.prev=24,e.t0=e['catch'](10),$('#checkout-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Shipping note could not added. Please retry',o.dataBind(),o.show();case 35:case'end':return e.stop();}},e,this,[[10,24]])}));return function t(){return e.apply(this,arguments)}}(),makePaymentButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=14;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to make payment',t.dataBind(),t.show(),$('#checkout-page #checkout-make-payment').removeAttr('disabled'),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].dataBind(),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].stop(),e.abrupt('return');case 14:if('paystack'!==utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.payment_method){e.next=75;break}return $('#checkout-page #checkout-make-payment').attr('disabled',!0),$('#loader-modal-message').html('Preparing Payment Channel...'),$('#loader-modal').get(0).show(),e.prev=18,e.next=21,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 21:return a=e.sent.userDetails,e.next=24,Promise.resolve($.ajax({url:'https://api.paystack.co/transaction/initialize',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Bearer '+Base64.decode(utopiasoftware[utopiasoftware_app_namespace].paystackAccessor))},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify({email:a.email,amount:''+100*kendo.parseFloat(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.total),callback_url:'https://shopoakexclusive.com/'})}));case 24:if(o=e.sent,!0!==o.status){e.next=54;break}return e.next=28,new Promise(function(e,t){var a=cordova.InAppBrowser.open(window.encodeURI(o.data.authorization_url),'_blank','location=yes,clearcache=yes,clearsessioncache=yes,closebuttoncolor=#ffffff,hardwareback=no,hidenavigationbuttons=yes,hideurlbar=no,zoom=no,toolbarcolor=#3f51b5');a.addEventListener('loadstart',function(e){e.url.startsWith('https://shopoakexclusive.com/')&&(a._utopiasoftware_transaction_completed=!0,a._utopiasoftware_transaction_completed_url=e.url,a.close())}),a.addEventListener('loaderror',function(){a.close()}),a.addEventListener('exit',function(){!0===a._utopiasoftware_transaction_completed?e(a._utopiasoftware_transaction_completed_url):t()})});case 28:if(s=e.sent,n=new URLSearchParams(s.split('?')[1]),i=n.get('reference'),i&&''!==i){e.next=33;break}throw'error';case 33:return $('#loader-modal-message').html('Completing Order Placement...'),r=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),r.transaction_id=i,r.set_paid=!0,r.coupon_lines=r.coupon_lines.map(function(e){return{code:e.code}}),e.next=40,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+r.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(r)}));case 40:return r=e.sent,e.prev=41,e.next=44,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.removeData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 44:e.next=48;break;case 46:e.prev=46,e.t0=e['catch'](41);case 48:return $('#checkout-order-placement-modal .order-number').html(r.number),$('#checkout-order-placement-modal #checkout-order-placement-modal-ok-button').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('ons-splitter').get(0).content.load('app-main-template');case 2:return e.next=4,$('#checkout-order-placement-modal').get(0).hide();case 4:case'end':return e.stop();}},e,this)})),e.next=52,$('#checkout-order-placement-modal').get(0).show();case 52:e.next=55;break;case 54:throw'error';case 55:e.next=67;break;case 57:e.prev=57,e.t1=e['catch'](18),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),p=$('.timed-page-toast').get(0).ej2_instances[0],p.cssClass='error-ej2-toast',p.timeOut=3500,p.content='Error making payment for this order. Try again',p.dataBind(),p.show();case 67:return e.prev=67,$('#checkout-page #checkout-make-payment').removeAttr('disabled'),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].dataBind(),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].stop(),$('#loader-modal').get(0).hide(),e.finish(67);case 74:return e.abrupt('return');case 75:if('cod'!==utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.payment_method){e.next=118;break}return $('#checkout-page #checkout-make-payment').attr('disabled',!0),$('#loader-modal-message').html('Completing Order Placement...'),e.next=80,$('#loader-modal').get(0).show();case 80:return e.prev=80,d=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),d.status='processing',d.coupon_lines=d.coupon_lines.map(function(e){return{code:e.code}}),e.next=86,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+d.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(d)}));case 86:return d=e.sent,e.prev=87,e.next=90,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.removeData('user-cart',utopiasoftware[utopiasoftware_app_namespace].model.appDatabase);case 90:e.next=94;break;case 92:e.prev=92,e.t2=e['catch'](87);case 94:return $('#checkout-order-placement-modal .order-number').html(d.number),$('#checkout-order-placement-modal #checkout-order-placement-modal-ok-button').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$('ons-splitter').get(0).content.load('app-main-template');case 2:return e.next=4,$('#checkout-order-placement-modal').get(0).hide();case 4:case'end':return e.stop();}},e,this)})),e.next=98,$('#checkout-order-placement-modal').get(0).show();case 98:e.next=110;break;case 100:e.prev=100,e.t3=e['catch'](80),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),l=$('.timed-page-toast').get(0).ej2_instances[0],l.cssClass='error-ej2-toast',l.timeOut=3500,l.content='Error placing this order. Try again',l.dataBind(),l.show();case 110:return e.prev=110,$('#checkout-page #checkout-make-payment').removeAttr('disabled'),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].dataBind(),$('#checkout-page #checkout-make-payment').get(0).ej2_instances[0].stop(),$('#loader-modal').get(0).hide(),e.finish(110);case 117:return e.abrupt('return');case 118:case'end':return e.stop();}},e,this,[[18,57,67,74],[41,46],[80,100,110,117],[87,92]])}));return function t(){return e.apply(this,arguments)}}(),displayContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n,i,r,p,d,l,c,g,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return t=e.sent.userDetails,!0===utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderBillingDetails&&(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.billing=t.billing,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderBillingDetails=!1),!0===utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderShippingDetails&&(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping=t.shipping,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping_lines[0]=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping_lines[0]||{},Object.assign(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping_lines[0],{method_id:'',method_title:'',instance_id:''}),utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder.shipping_lines[0].total='',utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.updateOrderShippingDetails=!1),a=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder,$('#checkout-page #checkout-personal-details-email').html(t.email),$('#checkout-page #checkout-personal-details-first-name').html(t.first_name),$('#checkout-page #checkout-personal-details-last-name').html(t.last_name),$('#checkout-page #checkout-billing-information-address').html(a.billing.address_1),$('#checkout-page #checkout-billing-information-city').html(a.billing.city),$('#checkout-page #checkout-shipping-information-first-name').html(a.shipping.first_name),$('#checkout-page #checkout-shipping-information-last-name').html(a.shipping.last_name),$('#checkout-page #checkout-shipping-information-address').html(a.shipping.address_1),$('#checkout-page #checkout-shipping-information-city').html(a.shipping.city),o=''==a.shipping.country?'NG':a.shipping.country,s=0,n=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.countryArray.find(function(e){return e.code===o}),n&&(i=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.shoppingZonesArray.find(function(e){return e.name===n.name}),i&&(s=i.id)),e.next=22,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/shipping/zones/'+s+'/methods'),type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{}}));case 22:for(r=e.sent,r=r.filter(function(e){return!0===e.enabled}),p=$('#checkout-shipping-method-type').get(0).ej2_instances[0],p.removeEventListener('select'),p.dataSource=r,0<a.shipping_lines.length&&(p.value=a.shipping_lines[0].method_id,''===p.value&&(p.value=null)),p.dataBind(),p.addEventListener('select',function(){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),a=$('.timed-page-toast').get(0).ej2_instances[0],a.cssClass='error-ej2-toast',a.timeOut=3e3,a.content='Connect to the Internet to change shipping method',a.dataBind(),a.show(),e.abrupt('return');case 10:return $('#checkout-page .modal').css('display','table'),o=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),o.shipping_lines[0]=o.shipping_lines[0]||{},Object.assign(o.shipping_lines[0],{method_id:p.value,method_title:p.text,instance_id:''+p.getDataByValue(p.value).instance_id}),o.coupon_lines=o.coupon_lines.map(function(e){return{code:e.code}}),e.prev=15,e.next=18,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/oakscripts/setshipping.php',type:'post',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(t.email+':'+t.password))},crossDomain:!0,xhrFields:{withCredentials:!0},dataType:'text',timeout:24e4,processData:!0,data:{id:p.getDataByValue(p.value).instance_id,method_id:p.getDataByValue(p.value).method_id}}));case 18:return e.next=20,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v2/cart/calculate',type:'post',contentType:'application/json',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(t.email+':'+t.password))},crossDomain:!0,xhrFields:{withCredentials:!0},dataType:'text',timeout:24e4,processData:!0,data:{}}));case 20:return e.next=22,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v2/cart/totals',type:'get',contentType:'application/json',beforeSend:function a(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(t.email+':'+t.password))},crossDomain:!0,xhrFields:{withCredentials:!0},dataType:'json',timeout:24e4,processData:!0,data:{}}));case 22:return s=e.sent,o.shipping_lines[0].total=''+s.shipping_total,e.next=26,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+o.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(o)}));case 26:return o=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=o,p.enabled=!1,p.dataBind(),e.next=32,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow();case 32:e.next=46;break;case 34:e.prev=34,e.t0=e['catch'](15),e.t0=JSON.parse(e.t0.responseText.trim()),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Shipping method not updated, retry. '+(e.t0.message||''),n.dataBind(),n.show(),$('#checkout-page .modal').css('display','none');case 46:case'end':return e.stop();}},e,this,[[15,34]])})),0)}),d=$('#checkout-payment-method-type').get(0).ej2_instances[0],d.removeEventListener('select'),d.value=a.payment_method,d.dataBind(),d.addEventListener('select',function(){window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=10;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='error-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to change payment method',t.dataBind(),t.show(),e.abrupt('return');case 10:return $('#checkout-page .modal').css('display','table'),a=JSON.parse(JSON.stringify(utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder)),a.payment_method=d.value,a.payment_method_title=d.text,a.coupon_lines=a.coupon_lines.map(function(e){return{code:e.code}}),e.prev=15,e.next=18,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+a.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(a)}));case 18:return a=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder=a,d.enabled=!1,d.dataBind(),e.next=24,utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.pageShow();case 24:e.next=38;break;case 26:e.prev=26,e.t0=e['catch'](15),e.t0=JSON.parse(e.t0.responseText),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Payment method not updated, retry. '+(e.t0.message||''),o.dataBind(),o.show(),$('#checkout-page .modal').css('display','none');case 38:case'end':return e.stop();}},e,this,[[15,26]])})),0)}),l=$('#checkout-payment-vouchers').get(0).ej2_instances[0],c=a.coupon_lines.map(function(e){return e.code}),l.dataSource=c,l.value=c,l.dataBind(),$('#checkout-page #checkout-payment-order-note-text').val(a.customer_note),g='',u=0;u<a.line_items.length;u++)g+='<div class="col-xs-6" style="text-align: right; padding-right: 5px;\n                        padding-top: 10px; padding-bottom: 10px">'+a.line_items[u].name+'</div>\n                        <div class="col-xs-2" style="text-align: left;\n                        padding-top: 10px; padding-bottom: 10px">&times;'+a.line_items[u].quantity+'</div>\n                        <div class="col-xs-4" style="text-align: left; padding-left: 5px;\n                        padding-top: 10px; padding-bottom: 10px">\n                        &#x20a6;'+kendo.toString(kendo.parseFloat(a.line_items[u].subtotal),'n2')+'</div>\n                        <div class="clearfix visible-xs-block"></div>';$('#checkout-page #checkout-order-items-container').html(g),$('#checkout-page #checkout-page-items-cost').html('&#x20a6;'+kendo.toString(kendo.parseFloat(a.total)-kendo.parseFloat(a.shipping_total)+kendo.parseFloat(a.discount_total),'n2')),$('#checkout-page #checkout-page-shipping-cost').html('&#x20a6;'+kendo.toString(kendo.parseFloat(a.shipping_total),'n2')),$('#checkout-page #checkout-page-discount-cost').html('&#x20a6;'+kendo.toString(kendo.parseFloat(a.discount_total),'n2')),$('#checkout-page #checkout-page-total-cost').html('&#x20a6;'+kendo.toString(kendo.parseFloat(a.total),'n2')),0<kendo.parseFloat(a.discount_total)?$('#checkout-page .checkout-page-discount').css('display','block'):$('#checkout-page .checkout-page-discount').css('display','none');case 49:return e.prev=49,e.finish(49);case 51:case'end':return e.stop();}},e,this,[[0,,49,51]])}));return function t(){return e.apply(this,arguments)}}(),validateOrderCheckout:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.abrupt('return',new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,o){var s,n,i,r,p,d,l,c,g,u,m,h,f,_,w,v,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#checkout-page #checkout-make-payment').attr('disabled',!0),s=utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder,e.prev=2,e.next=5,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 5:if(n=e.sent.userDetails,n.first_name&&''!=n.first_name){e.next=8;break}throw'validation error';case 8:$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-success').css('display','inline-block'),$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').css('display','none'),i=$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,$('#checkout-page').get(0).ej2_instances[i].close(),e.next=24;break;case 14:e.prev=14,e.t0=e['catch'](2),$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-success').css('display','none'),$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').css('display','inline-block'),r=$('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,p=$('#checkout-page').get(0).ej2_instances[r],p.content='incomplete personal details',p.dataBind(),p.open($('#checkout-page .checkout-personal-details-accordion-item .utopiasoftware-checkout-failure').get(0)),t=!1;case 24:if(s.billing.address_1&&''!=s.billing.address_1?($('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-success').css('display','inline-block'),$('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').css('display','none'),c=$('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,$('#checkout-page').get(0).ej2_instances[c].close()):($('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-success').css('display','none'),$('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').css('display','inline-block'),d=$('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,l=$('#checkout-page').get(0).ej2_instances[d],l.content='incomplete billing details',l.dataBind(),l.open($('#checkout-page .checkout-billing-information-item .utopiasoftware-checkout-failure').get(0)),t=!1),s.shipping.address_1&&''!=s.shipping.address_1?($('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-success').css('display','inline-block'),$('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').css('display','none'),m=$('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,$('#checkout-page').get(0).ej2_instances[m].close()):($('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-success').css('display','none'),$('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').css('display','inline-block'),g=$('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,u=$('#checkout-page').get(0).ej2_instances[g],u.content='incomplete shipping details',u.dataBind(),u.open($('#checkout-page .checkout-shipping-information-item .utopiasoftware-checkout-failure').get(0)),t=!1),$('#checkout-page #checkout-shipping-method-type').get(0).ej2_instances[0].value?($('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-success').css('display','inline-block'),$('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').css('display','none'),_=$('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,$('#checkout-page').get(0).ej2_instances[_].close()):($('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-success').css('display','none'),$('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').css('display','inline-block'),h=$('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,f=$('#checkout-page').get(0).ej2_instances[h],f.content='shipping method required',f.dataBind(),f.open($('#checkout-page .checkout-shipping-method-item .utopiasoftware-checkout-failure').get(0)),t=!1),$('#checkout-page #checkout-payment-method-type').get(0).ej2_instances[0].value?($('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-success').css('display','inline-block'),$('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').css('display','none'),x=$('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,$('#checkout-page').get(0).ej2_instances[x].close()):($('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-success').css('display','none'),$('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').css('display','inline-block'),w=$('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').get(0)._utopiasoftware_validator_index,v=$('#checkout-page').get(0).ej2_instances[w],v.content='payment method required',v.dataBind(),v.open($('#checkout-page .checkout-payment-method-item .utopiasoftware-checkout-failure').get(0)),t=!1),!0!==t){e.next=34;break}return $('#checkout-page #checkout-make-payment').removeAttr('disabled'),a(),e.abrupt('return');case 34:return $('#checkout-page #checkout-make-payment').attr('disabled',!0),o(),e.abrupt('return');case 37:case'end':return e.stop();}},e,this,[[2,14]])}));return function(){return e.apply(this,arguments)}}()));case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),createRemoteCartFromOrder:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:utopiasoftware[utopiasoftware_app_namespace].controller.checkoutPageViewModel.chekoutOrder;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a,o){var s,n,i,r,p,d,l,c,g,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 3:return s=e.sent.userDetails,e.next=6,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v2/cart/clear',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(s.email+':'+s.password))},crossDomain:!0,xhrFields:{withCredentials:!0},dataType:'json',timeout:24e4,processData:!0,data:{}}).then(function(e){return e},function(){o('fatal error')}));case 6:n=[],i=0;case 8:if(!(i<t.line_items.length)){e.next=40;break}for(r={},p=!0,d=!1,l=void 0,e.prev=13,c=t.line_items[i].meta_data[Symbol.iterator]();!(p=(g=c.next()).done);p=!0)u=g.value,'_fpd_data'===u.key&&(!r.cart_item_data&&(r.cart_item_data={}),!r.cart_item_data.fpd_data&&(r.cart_item_data.fpd_data={}),r.cart_item_data.fpd_data.fpd_product=u.value,r.cart_item_data.fpd_data.fpd_product_price=''+t.line_items[i].price),'_fpd_print_order'===u.key&&(!r.cart_item_data&&(r.cart_item_data={}),!r.cart_item_data.fpd_data&&(r.cart_item_data.fpd_data={}),r.cart_item_data.fpd_data.fpd_print_order=u.value);e.next=21;break;case 17:e.prev=17,e.t0=e['catch'](13),d=!0,l=e.t0;case 21:e.prev=21,e.prev=22,!p&&c.return&&c.return();case 24:if(e.prev=24,!d){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return r.product_id=t.line_items[i].product_id,r.variation_id=t.line_items[i].variation_id,r.quantity=t.line_items[i].quantity,e.t1=n,e.next=35,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v2/cart/add',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+Base64.encode(s.email+':'+s.password))},crossDomain:!0,xhrFields:{withCredentials:!0},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(r)}));case 35:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 37:i++,e.next=8;break;case 40:return e.next=42,Promise.all(n);case 42:a();case 43:return e.prev=43,e.finish(43);case 45:case'end':return e.stop();}},e,this,[[0,,43,45],[13,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()));case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},trackOrderPageViewModel:{trackOrderResultsArray:null,pageInit:function o(e){var t=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){a.next=3;break}return setTimeout(t,500),a.abrupt('return');case 3:e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.backButtonClicked;try{new ej.dropdowns.AutoComplete({floatLabelType:'Never',placeholder:'Enter Order Number',allowCustom:!0,filterType:'Contains',minLength:1e4,suggestionCount:20,dataSource:[],blur:function e(){this._allowRemoteSearch=!1},change:function t(){var e='';return!0===this._allowRemoteSearch?void(e=this.value?this.value.trim():'',this.focusOut(),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,o,s,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.prev=1,$('#track-order-page .row').css('display','none'),$('#track-order-page .modal').css('display','table'),t.next=6,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 6:return o=t.sent.userDetails,t.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:o.id,search:e});case 9:return a=t.sent,t.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.displayPageContent(a[0]);case 12:0==a[0].length?($('#track-order-page .row').css('display','none'),$('#track-order-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='default-ej2-toast',s.timeOut=3e3,s.content='Sorry, no order was found.',s.dataBind(),s.show()):($('#track-order-page .row').css('display','block'),$('#track-order-page .modal').css('display','none')),t.next=28;break;case 15:t.prev=15,t.t0=t['catch'](1),$('#track-order-page .row').css('display','none'),$('#track-order-page .modal').css('display','none'),$('#track-order-page #track-order-page-input').get(0).ej2_instances[0].focusOut(),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),n.dataBind(),n.show();case 28:case'end':return t.stop();}},t,this,[[1,15]])})),0)):void(this._allowRemoteSearch=!1)}}).appendTo('#track-order-page-input')}catch(e){}case 5:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#track-order-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#track-order-page #track-order-page-input').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray=null},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to track orders',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},enterButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.which===kendo.keys.ENTER&&(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),Keyboard.hide(),a=$('#track-order-page #track-order-page-input').get(0).ej2_instances[0],a.value=$('#track-order-page #track-order-page-input').val(),a._allowRemoteSearch=!0,a.dataBind(),a.change());case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),loadOrders:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.page||1,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:t.per_page||20,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=a,t.per_page=o,s=[],navigator.connection.type===Connection.NONE?s.push(Promise.reject('no internet connection')):s.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:t})).then(function(t){0<t.length&&(utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray=t),e(t)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(s));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e){var a='';if(0>=t.length)e(t.length);else{for(var o=0;o<t.length;o++)a+='pending'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: brown">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'processing'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: goldenrod">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'on-hold'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'completed'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: green">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'cancelled'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: #d64113">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            trackOrderPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            </div>\n                            </div>';$('#track-order-page #track-order-page-orders-container').html(a),e(t.length)}}),e.abrupt('return',a);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),checkoutButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#track-order-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=$('#app-main-navigator').get(0).pages,s=o.findIndex(function(e,t){return'checkout-page'===$(o[t]).get(0).id}),!(-1<s)){e.next=7;break}return e.next=7,$('#app-main-navigator').get(0).removePage(s);case 7:return e.next=9,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:t}});case 9:e.next=21;break;case 11:e.prev=11,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Order checkout failed. Please retry',n.dataBind(),n.show();case 21:return e.prev=21,$('#track-order-page .modal').css('display','none'),e.finish(21);case 24:case'end':return e.stop();}},e,this,[[1,11,21,24]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),detailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#track-order-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,e.next=4,$('#app-main-navigator').get(0).pushPage('order-details-page.html',{data:{orderData:t}});case 4:e.next=16;break;case 6:e.prev=6,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Order checkout failed. Please retry',o.dataBind(),o.show();case 16:return e.prev=16,$('#track-order-page .modal').css('display','none'),e.finish(16);case 19:case'end':return e.stop();}},e,this,[[1,6,16,19]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),cancelButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to cancel this order',o.dataBind(),o.show(),e.abrupt('return');case 11:return $('#cancel-order-action-sheet #cancel-order-no').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById('cancel-order-action-sheet').hide();case 2:case'end':return e.stop();}},e,this)})),$('#cancel-order-action-sheet #cancel-order-yes').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#track-order-page .modal').css('display','table'),e.prev=1,e.next=4,document.getElementById('cancel-order-action-sheet').hide();case 4:return t=utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray[window.parseInt(a.attr('data-order-index'))],t.status='cancelled',e.next=8,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+t.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(t)}));case 8:return e.next=10,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 10:return o=e.sent.userDetails,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:o.id,search:$('#track-order-page #track-order-page-input').get(0).ej2_instances[0].value||''});case 13:return s=e.sent,e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.displayPageContent(s[0]);case 16:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='default-ej2-toast',n.timeOut=2e3,n.content='Order #'+t.id+' has been cancelled',n.dataBind(),n.show(),e.next=36;break;case 26:e.prev=26,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Error cancelling order #'+t.id+'. Try again',i.dataBind(),i.show();case 36:return e.prev=36,$('#track-order-page .modal').css('display','none'),e.finish(36);case 39:case'end':return e.stop();}},e,this,[[1,26,36,39]])})),e.next=15,document.getElementById('cancel-order-action-sheet').show();case 15:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),reorderButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to make a reorder',o.dataBind(),o.show(),e.abrupt('return');case 11:$('#track-order-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.trackOrderResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=JSON.parse(JSON.stringify(t)),delete o.id,o.transaction_id='',o.line_items.forEach(function(e){delete e.id,e.total=e.subtotal;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.tax_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.shipping_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.fee_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),delete o.coupon_lines,delete o.discount_total,delete o.discount_tax,o.set_paid=!1,o.status='pending',e.next=16,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(o)}));case 16:return o=e.sent,e.next=19,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:o}});case 19:e.next=31;break;case 21:e.prev=21,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.timeOut=3e3,s.content='Placing new order failed. Please retry',s.dataBind(),s.show();case 31:return e.prev=31,$('#track-order-page .modal').css('display','none'),e.finish(31);case 34:case'end':return e.stop();}},e,this,[[1,21,31,34]])})),0);case 13:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},completedOrdersPageViewModel:{ordersResultsArray:null,pageInit:function o(e){var t=function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(){var s,n,i,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){o.next=3;break}return setTimeout(t,500),o.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.backButtonClicked,$('#completed-orders-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.pagePullHookAction,$('#completed-orders-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#completed-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#completed-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#completed-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),o.prev=6,$('#completed-orders-page .row').css('display','none'),$('#completed-orders-page .modal').css('display','table'),o.next=11,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 11:return s=o.sent.userDetails,o.next=14,utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:s.id,status:'completed'});case 14:return n=o.sent,o.next=17,utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.displayPageContent(n[0]);case 17:0==n[0].length?($('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .row').css('display','none'),$('#completed-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='default-ej2-toast',i.timeOut=3e3,i.content='Sorry, no order was found.',i.dataBind(),i.show()):($('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .row').css('display','block'),$('#completed-orders-page .modal').css('display','none')),o.next=33;break;case 20:o.prev=20,o.t0=o['catch'](6),$('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .row').css('display','none'),$('#completed-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),r=$('.timed-page-toast').get(0).ej2_instances[0],r.cssClass='error-ej2-toast',r.timeOut=3e3,r.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),r.dataBind(),r.show();case 33:case'end':return o.stop();}},o,this,[[6,20]])}));return function(){return o.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#completed-orders-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray=null},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to view orders',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#completed-orders-page #completed-orders-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,$('#completed-orders-page .modal').css('display','table'),e.next=6,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 6:return a=e.sent.userDetails,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:a.id,status:'completed'});case 9:return o=e.sent,e.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.displayPageContent(o[0]);case 12:0==o[0].length?($('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .row').css('display','none'),$('#completed-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='default-ej2-toast',s.timeOut=3e3,s.content='Sorry, no order was found.',s.dataBind(),s.show()):($('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .row').css('display','block'),$('#completed-orders-page .modal').css('display','none')),e.next=27;break;case 15:e.prev=15,e.t0=e['catch'](2),$('#completed-orders-page .page-preloader').css('display','none'),$('#completed-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),n.dataBind(),n.show();case 27:return e.prev=27,$('#completed-orders-page #completed-orders-page-pull-hook').removeAttr('disabled'),$('#completed-orders-page .page-preloader').css('display','none'),t(),e.finish(27);case 32:case'end':return e.stop();}},e,this,[[2,15,27,32]])}));return function t(){return e.apply(this,arguments)}}(),loadOrders:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.page||1,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:t.per_page||20,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=a,t.per_page=o,s=[],navigator.connection.type===Connection.NONE?s.push(Promise.reject('no internet connection')):s.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:t})).then(function(t){0<t.length&&(utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray=t),e(t)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(s));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e){var a='';if(0>=t.length)e(t.length);else{for(var o=0;o<t.length;o++)a+='pending'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: brown">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'processing'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: goldenrod">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'on-hold'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'completed'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: green">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'cancelled'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: #d64113">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            completedOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            </div>\n                            </div>';$('#completed-orders-page #completed-orders-page-orders-container').html(a),e(t.length)}}),e.abrupt('return',a);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),checkoutButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#completed-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=$('#app-main-navigator').get(0).pages,s=o.findIndex(function(e,t){return'checkout-page'===$(o[t]).get(0).id}),!(-1<s)){e.next=7;break}return e.next=7,$('#app-main-navigator').get(0).removePage(s);case 7:return e.next=9,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:t}});case 9:e.next=21;break;case 11:e.prev=11,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Order checkout failed. Please retry',n.dataBind(),n.show();case 21:return e.prev=21,$('#completed-orders-page .modal').css('display','none'),e.finish(21);case 24:case'end':return e.stop();}},e,this,[[1,11,21,24]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),detailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#completed-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,e.next=4,$('#app-main-navigator').get(0).pushPage('order-details-page.html',{data:{orderData:t}});case 4:e.next=16;break;case 6:e.prev=6,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Order checkout failed. Please retry',o.dataBind(),o.show();case 16:return e.prev=16,$('#completed-orders-page .modal').css('display','none'),e.finish(16);case 19:case'end':return e.stop();}},e,this,[[1,6,16,19]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),cancelButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to cancel this order',o.dataBind(),o.show(),e.abrupt('return');case 11:return $('#cancel-order-action-sheet #cancel-order-no').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById('cancel-order-action-sheet').hide();case 2:case'end':return e.stop();}},e,this)})),$('#cancel-order-action-sheet #cancel-order-yes').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#completed-orders-page .modal').css('display','table'),e.prev=1,e.next=4,document.getElementById('cancel-order-action-sheet').hide();case 4:return t=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],t.status='cancelled',e.next=8,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+t.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(t)}));case 8:return e.next=10,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 10:return o=e.sent.userDetails,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.trackOrderPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:o.id,status:'completed'});case 13:return s=e.sent,e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.displayPageContent(s[0]);case 16:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='default-ej2-toast',n.timeOut=2e3,n.content='Order #'+t.id+' has been cancelled',n.dataBind(),n.show(),e.next=36;break;case 26:e.prev=26,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Error cancelling order #'+t.id+'. Try again',i.dataBind(),i.show();case 36:return e.prev=36,$('#completed-orders-page .modal').css('display','none'),e.finish(36);case 39:case'end':return e.stop();}},e,this,[[1,26,36,39]])})),e.next=15,document.getElementById('cancel-order-action-sheet').show();case 15:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),reorderButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to make a reorder',o.dataBind(),o.show(),e.abrupt('return');case 11:$('#completed-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.completedOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=JSON.parse(JSON.stringify(t)),delete o.id,o.transaction_id='',o.line_items.forEach(function(e){delete e.id,e.total=e.subtotal;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.tax_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.shipping_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.fee_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),delete o.coupon_lines,delete o.discount_total,delete o.discount_tax,o.set_paid=!1,o.status='pending',e.next=16,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(o)}));case 16:return o=e.sent,e.next=19,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:o}});case 19:e.next=31;break;case 21:e.prev=21,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.timeOut=3e3,s.content='Placing new order failed. Please retry',s.dataBind(),s.show();case 31:return e.prev=31,$('#completed-orders-page .modal').css('display','none'),e.finish(31);case 34:case'end':return e.stop();}},e,this,[[1,21,31,34]])})),0);case 13:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},pendingOrdersPageViewModel:{ordersResultsArray:null,pageInit:function o(e){var t=function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(){var s,n,i,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){o.next=3;break}return setTimeout(t,500),o.abrupt('return');case 3:return e.target.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.backButtonClicked,$('#pending-orders-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.pagePullHookAction,$('#pending-orders-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#pending-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#pending-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#pending-orders-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),o.prev=6,$('#pending-orders-page .row').css('display','none'),$('#pending-orders-page .modal').css('display','table'),o.next=11,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 11:return s=o.sent.userDetails,o.next=14,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:s.id,status:'pending'});case 14:return n=o.sent,o.next=17,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.displayPageContent(n[0]);case 17:0==n[0].length?($('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .row').css('display','none'),$('#pending-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='default-ej2-toast',i.timeOut=3e3,i.content='Sorry, no order was found.',i.dataBind(),i.show()):($('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .row').css('display','block'),$('#pending-orders-page .modal').css('display','none')),o.next=33;break;case 20:o.prev=20,o.t0=o['catch'](6),$('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .row').css('display','none'),$('#pending-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),r=$('.timed-page-toast').get(0).ej2_instances[0],r.cssClass='error-ej2-toast',r.timeOut=3e3,r.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),r.dataBind(),r.show();case 33:case'end':return o.stop();}},o,this,[[6,20]])}));return function(){return o.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function e(){$('#pending-orders-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount),window.SoftInputMode.set('adjustResize'),document.addEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.deviceOfflineListener,!1),document.addEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.deviceOnlineListener,!1)},pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.removeEventListener('offline',utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.deviceOfflineListener,!1),document.removeEventListener('online',utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.deviceOnlineListener,!1);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray=null},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},deviceOfflineListener:function t(){var e=$('.page-toast').get(0).ej2_instances[0];e.hide('All'),e.cssClass='default-ej2-toast',e.content='No Internet connection. Connect to the Internet to view orders',e.dataBind(),e.show()},deviceOnlineListener:function e(){$('.page-toast').get(0).ej2_instances[0].hide('All')},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#pending-orders-page #pending-orders-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,$('#pending-orders-page .modal').css('display','table'),e.next=6,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 6:return a=e.sent.userDetails,e.next=9,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:a.id,status:'pending'});case 9:return o=e.sent,e.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.displayPageContent(o[0]);case 12:0==o[0].length?($('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .row').css('display','none'),$('#pending-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='default-ej2-toast',s.timeOut=3e3,s.content='Sorry, no order was found.',s.dataBind(),s.show()):($('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .row').css('display','block'),$('#pending-orders-page .modal').css('display','none')),e.next=27;break;case 15:e.prev=15,e.t0=e['catch'](2),$('#pending-orders-page .page-preloader').css('display','none'),$('#pending-orders-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Sorry, a search error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':''),n.dataBind(),n.show();case 27:return e.prev=27,$('#pending-orders-page #pending-orders-page-pull-hook').removeAttr('disabled'),$('#pending-orders-page .page-preloader').css('display','none'),t(),e.finish(27);case 32:case'end':return e.stop();}},e,this,[[2,15,27,32]])}));return function t(){return e.apply(this,arguments)}}(),loadOrders:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.page||1,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:t.per_page||20,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=a,t.per_page=o,s=[],navigator.connection.type===Connection.NONE?s.push(Promise.reject('no internet connection')):s.push(new Promise(function(e,a){Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:t})).then(function(t){0<t.length&&(utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray=t),e(t)}).catch(function(e){a(e)})})),e.abrupt('return',Promise.all(s));case 5:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayPageContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e){var a='';if(0>=t.length)e(t.length);else{for(var o=0;o<t.length;o++)a+='pending'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: brown">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'processing'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: goldenrod">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'on-hold'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.checkoutButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Checkout\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.cancelButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Cancel\n                            </ons-button>\n                            </div>\n                            </div>':'completed'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: green">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':'cancelled'===t[o].status?' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: #d64113">\n                                '+t[o].status+'\n                            </span>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.reorderButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Reorder\n                            </ons-button>\n                            <ons-button disable-auto-styling modifier="quiet" \n                            onclick="utopiasoftware[utopiasoftware_app_namespace].controller.\n                            pendingOrdersPageViewModel.detailsButtonClicked(this)"\n                            style="border-color: #ffffff; background-color: #ffffff; color: #363E7C;\n                                    margin: 0; padding: 0; transform: scale(0.75);" data-order-index="'+o+'">\n                                Details\n                            </ons-button>\n                            </div>\n                            </div>':' <div class="row" style="font-size: 1em; font-weight: 300;\n                            border-bottom: 1px lightgray solid; color: #6d6d72;">\n                            <div class="col-xs-2" style=" word-wrap: break-word; text-align: center; \n                            padding-left: 5px; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t[o].id+'</div>\n                            <div class="col-xs-4" style=" word-wrap: break-word; \n                            text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                            '+kendo.toString(kendo.parseFloat(t[o].total),'n2')+'\n                            </div>\n                            <div class="col-xs-6" style="text-align: center; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 1px">\n                            <span style="display: block; text-transform: uppercase; color: black">\n                                '+t[o].status+'\n                            </span>\n                            </div>\n                            </div>';$('#pending-orders-page #pending-orders-page-orders-container').html(a),e(t.length)}}),e.abrupt('return',a);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),checkoutButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#pending-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=$('#app-main-navigator').get(0).pages,s=o.findIndex(function(e,t){return'checkout-page'===$(o[t]).get(0).id}),!(-1<s)){e.next=7;break}return e.next=7,$('#app-main-navigator').get(0).removePage(s);case 7:return e.next=9,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:t}});case 9:e.next=21;break;case 11:e.prev=11,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.timeOut=3e3,n.content='Order checkout failed. Please retry',n.dataBind(),n.show();case 21:return e.prev=21,$('#pending-orders-page .modal').css('display','none'),e.finish(21);case 24:case'end':return e.stop();}},e,this,[[1,11,21,24]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),detailsButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t),$('#pending-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,e.next=4,$('#app-main-navigator').get(0).pushPage('order-details-page.html',{data:{orderData:t}});case 4:e.next=16;break;case 6:e.prev=6,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Order checkout failed. Please retry',o.dataBind(),o.show();case 16:return e.prev=16,$('#pending-orders-page .modal').css('display','none'),e.finish(16);case 19:case'end':return e.stop();}},e,this,[[1,6,16,19]])})),0);case 3:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),cancelButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to cancel this order',o.dataBind(),o.show(),e.abrupt('return');case 11:return $('#cancel-order-action-sheet #cancel-order-no').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById('cancel-order-action-sheet').hide();case 2:case'end':return e.stop();}},e,this)})),$('#cancel-order-action-sheet #cancel-order-yes').get(0).onclick=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#pending-orders-page .modal').css('display','table'),e.prev=1,e.next=4,document.getElementById('cancel-order-action-sheet').hide();case 4:return t=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],t.status='cancelled',e.next=8,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+t.id),type:'put',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(t)}));case 8:return e.next=10,utopiasoftware[utopiasoftware_app_namespace].databaseOperations.loadData('user-details',utopiasoftware[utopiasoftware_app_namespace].model.encryptedAppDatabase);case 10:return o=e.sent.userDetails,e.next=13,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.loadOrders({page:1,per_page:20,order:'desc',orderby:'date',customer:o.id,status:'pending'});case 13:return s=e.sent,e.next=16,utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.displayPageContent(s[0]);case 16:$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),n=$('.timed-page-toast').get(0).ej2_instances[0],n.cssClass='default-ej2-toast',n.timeOut=2e3,n.content='Order #'+t.id+' has been cancelled',n.dataBind(),n.show(),e.next=36;break;case 26:e.prev=26,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),i=$('.timed-page-toast').get(0).ej2_instances[0],i.cssClass='error-ej2-toast',i.timeOut=3500,i.content='Error cancelling order #'+t.id+'. Try again',i.dataBind(),i.show();case 36:return e.prev=36,$('#pending-orders-page .modal').css('display','none'),e.finish(36);case 39:case'end':return e.stop();}},e,this,[[1,26,36,39]])})),e.next=15,document.getElementById('cancel-order-action-sheet').show();case 15:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),reorderButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$(t),navigator.connection.type!==Connection.NONE){e.next=11;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='default-ej2-toast',o.timeOut=3e3,o.content='Connect to the Internet to make a reorder',o.dataBind(),o.show(),e.abrupt('return');case 11:$('#pending-orders-page .modal').css('display','table'),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.pendingOrdersPageViewModel.ordersResultsArray[window.parseInt(a.attr('data-order-index'))],e.prev=1,o=JSON.parse(JSON.stringify(t)),delete o.id,o.transaction_id='',o.line_items.forEach(function(e){delete e.id,e.total=e.subtotal;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.tax_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.shipping_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),o.fee_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),delete o.coupon_lines,delete o.discount_total,delete o.discount_tax,o.set_paid=!1,o.status='pending',e.next=16,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(o)}));case 16:return o=e.sent,e.next=19,$('#app-main-navigator').get(0).pushPage('checkout-page.html',{data:{orderData:o}});case 19:e.next=31;break;case 21:e.prev=21,e.t0=e['catch'](1),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),s=$('.timed-page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.timeOut=3e3,s.content='Placing new order failed. Please retry',s.dataBind(),s.show();case 31:return e.prev=31,$('#pending-orders-page .modal').css('display','none'),e.finish(31);case 34:case'end':return e.stop();}},e,this,[[1,21,31,34]])})),0);case 13:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()},orderDetailsPageViewModel:{orderDetails:null,orderNotesArray:[],pageInit:function o(e){var t=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ons.isReady()&&!1!==utopiasoftware[utopiasoftware_app_namespace].model.isAppReady){e.next=3;break}return setTimeout(t,500),e.abrupt('return');case 3:return $('#app-main-navigator').get(0).topPage.onDeviceBackButton=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.backButtonClicked,$('#order-details-page-pull-hook',a).get(0).onAction=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.pagePullHookAction,$('#order-details-page-pull-hook',a).on('changestate',function(e){switch(e.originalEvent.state){case'initial':$('#order-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-down" size="24px" style="color: #363E7C"></ons-icon>');break;case'preaction':$('#order-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-icon icon="md-long-arrow-up" size="24px" style="color: #363E7C"></ons-icon>');break;case'action':$('#order-details-page-pull-hook-fab',e.originalEvent.pullHook).html('<ons-progress-circular indeterminate modifier="pull-hook"></ons-progress-circular>');}}),utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails=$('#app-main-navigator').get(0).topPage.data.orderData,e.prev=7,new ej.splitbuttons.ProgressButton({cssClass:'e-hide-spinner',duration:36000000}).appendTo('#order-details-reorder'),o=[],s=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails.id,o.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+s+'/notes'),type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{type:'any'}}))),e.next=14,Promise.all(o);case 14:return o=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderNotesArray=o[0],e.next=18,utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.displayContent();case 18:$('#order-details-page #order-details-reorder').removeAttr('disabled'),e.next=29;break;case 21:e.prev=21,e.t0=e['catch'](7),$('.page-toast').get(0).ej2_instances[0].hide('All'),n=$('.page-toast').get(0).ej2_instances[0],n.cssClass='error-ej2-toast',n.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',n.dataBind(),n.show();case 29:return e.prev=29,$('#order-details-page .page-preloader').css('display','none'),$('#order-details-page .modal').css('display','none'),e.finish(29);case 33:case'end':return e.stop();}},e,this,[[7,21,29,33]])}));return function(){return e.apply(this,arguments)}}(),a=$(e.target);t()},pageShow:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.SoftInputMode.set('adjustPan'),$('#order-details-page .cart-count').html(utopiasoftware[utopiasoftware_app_namespace].model.cartCount);case 2:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageHide:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),pageDestroy:function e(){$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].destroy(),utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails=null,utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderNotesArray=[]},backButtonClicked:function e(){$('#app-main-navigator').get(0).popPage()},pagePullHookAction:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $('#order-details-page #order-details-page-pull-hook').attr('disabled',!0),$('.page-toast').get(0).ej2_instances[0].hide('All'),e.prev=2,a=[],o=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails.id,a.push(Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+('/wp-json/wc/v3/orders/'+o+'/notes'),type:'get',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!0,data:{type:'any'}}))),e.next=8,Promise.all(a);case 8:return a=e.sent,utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderNotesArray=a[0],e.next=12,utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.displayContent();case 12:$('#order-details-page #order-details-reorder').removeAttr('disabled'),e.next=25;break;case 15:e.prev=15,e.t0=e['catch'](2),$('#order-details-page .page-preloader').css('display','none'),$('#order-details-page .modal').css('display','none'),$('.page-toast').get(0).ej2_instances[0].hide('All'),s=$('.page-toast').get(0).ej2_instances[0],s.cssClass='error-ej2-toast',s.content='Sorry, an error occurred.'+(navigator.connection.type===Connection.NONE?' Connect to the Internet.':'')+' Pull down to refresh and try again',s.dataBind(),s.show();case 25:return e.prev=25,$('#order-details-page #order-details-page-pull-hook').removeAttr('disabled'),$('#order-details-page .page-preloader').css('display','none'),t(),e.finish(25);case 30:case'end':return e.stop();}},e,this,[[2,15,25,30]])}));return function t(){return e.apply(this,arguments)}}(),reorderButtonClicked:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection.type!==Connection.NONE){e.next=14;break}return $('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),t=$('.timed-page-toast').get(0).ej2_instances[0],t.cssClass='default-ej2-toast',t.timeOut=3e3,t.content='Connect to the Internet to make a reorder',t.dataBind(),t.show(),$('#order-details-page #order-details-reorder').removeAttr('disabled'),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].dataBind(),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].stop(),e.abrupt('return');case 14:$('#order-details-page .modal').css('display','table'),$('#order-details-page #order-details-reorder').attr('disabled',!0),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].cssClass='',$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].dataBind(),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].start(),window.setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails,e.prev=1,a=JSON.parse(JSON.stringify(t)),delete a.id,a.transaction_id='',a.line_items.forEach(function(e){delete e.id,e.total=e.subtotal;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),a.tax_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),a.shipping_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),a.fee_lines.forEach(function(e){delete e.id;for(var t=0;t<e.meta_data.length;t++)delete e.meta_data[t].id}),delete a.coupon_lines,delete a.discount_total,delete a.discount_tax,a.set_paid=!1,a.status='pending',e.next=16,Promise.resolve($.ajax({url:utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl+'/wp-json/wc/v3/orders',type:'post',contentType:'application/json',beforeSend:function t(e){e.setRequestHeader('Authorization','Basic '+utopiasoftware[utopiasoftware_app_namespace].accessor)},dataType:'json',timeout:24e4,processData:!1,data:JSON.stringify(a)}));case 16:return a=e.sent,$('#order-details-page .modal').css('display','none'),$('#order-details-page #order-details-reorder').removeAttr('disabled',!0),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].dataBind(),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].stop(),e.next=24,$('#app-main-navigator').get(0).replacePage('checkout-page.html',{data:{orderData:a}});case 24:e.next=41;break;case 26:e.prev=26,e.t0=e['catch'](1),$('#order-details-page .modal').css('display','none'),$('#order-details-page #order-details-reorder').removeAttr('disabled',!0),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].cssClass='e-hide-spinner',$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].dataBind(),$('#order-details-page #order-details-reorder').get(0).ej2_instances[0].stop(),$('.page-toast').get(0).ej2_instances[0].hide('All'),$('.timed-page-toast').get(0).ej2_instances[0].hide('All'),o=$('.timed-page-toast').get(0).ej2_instances[0],o.cssClass='error-ej2-toast',o.timeOut=3e3,o.content='Placing new order failed. Please retry',o.dataBind(),o.show();case 41:return e.prev=41,e.finish(41);case 43:case'end':return e.stop();}},e,this,[[1,26,41,43]])})),0);case 20:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}(),displayContent:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{for(t=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderDetails,$('#order-details-page #order-details-list .order-details-order-number').html('#'+t.id),$('#order-details-page #order-details-list .order-details-order-status').html(''+t.status),t.date_created_gmt.endsWith('Z')||(t.date_created_gmt+='Z'),$('#order-details-page #order-details-list .order-details-order-date').html(''+kendo.toString(new Date(t.date_created_gmt),'MMMM dd, yyyy')),$('#order-details-page #order-details-list .order-details-order-total').html('&#x20a6;'+kendo.toString(kendo.parseFloat(t.total),'n2')),$('#order-details-page #order-details-list .order-details-payment-method').html(''+t.payment_method_title),$('#order-details-page #order-details-list .order-details-shipping-method').html(''+(t.shipping_lines[0]?t.shipping_lines[0].method_title:'')),$('#order-details-page #order-details-list .order-details-shipping-cost').html('&#x20a6;'+kendo.toString(kendo.parseFloat(t.shipping_total),'n2')),a='',o=0;o<utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderNotesArray.length;o++)s=utopiasoftware[utopiasoftware_app_namespace].controller.orderDetailsPageViewModel.orderNotesArray[o],a+='\n                    <div class="col-xs-6" style="text-align: right; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px;\n                            text-transform: lowercase; word-wrap: break-word">'+s.note+'</div>',s.date_created_gmt.endsWith('Z')||(s.date_created_gmt+='Z'),a+='\n                    <div class="col-xs-6" style="text-align: left; padding-left: 5px;\n                            padding-top: 10px; padding-bottom: 10px;\n                            text-transform: lowercase; word-wrap: break-word">\n                    '+kendo.toString(new Date(s.date_created_gmt),'MMMM dd, yyyy')+'        \n                    </div>\n                    <div class="clearfix visible-xs-block"></div>';for($('#order-details-page #order-details-list .order-details-order-notes').html(a),a='',n=0;n<t.line_items.length;n++)a+='<div class="col-xs-6" style="text-align: right; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.line_items[n].name+'</div>\n                        <div class="col-xs-2" style="text-align: left; padding-left: 5px;\n                            padding-top: 10px; padding-bottom: 10px">&times;'+t.line_items[n].quantity+'</div>\n                        <div class="col-xs-4" style="text-align: left; padding-left: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                        &#x20a6;'+kendo.toString(kendo.parseFloat(t.line_items[n].subtotal),'n2')+'</div>\n                        <div class="clearfix visible-xs-block"></div>';$('#order-details-page #order-details-list .order-details-order-items').html(a),a='',a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                '+(t.billing.first_name+' '+t.billing.last_name)+'</div>',t.billing.company&&''!==t.billing.company&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.company+'</div>'),t.billing.address_1&&''!==t.billing.address_1&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.address_1+'</div>'),t.billing.address_2&&''!==t.billing.address_2&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.address_2+'</div>'),a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.city+'</div>',t.billing.state&&''!==t.billing.state&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.state+'</div>'),t.billing.postcode&&''!==t.billing.postcode&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.postcode+'</div>'),a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.country+'</div>',a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.phone+'</div>',a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.billing.email+'</div>',$('#order-details-page #order-details-list .order-details-billing-details').html(a),a='',a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">\n                '+(t.shipping.first_name+' '+t.shipping.last_name)+'</div>',t.shipping.company&&''!==t.shipping.company&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.company+'</div>'),t.shipping.address_1&&''!==t.shipping.address_1&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.address_1+'</div>'),t.shipping.address_2&&''!==t.shipping.address_2&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.address_2+'</div>'),a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.city+'</div>',t.shipping.state&&''!==t.shipping.state&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.state+'</div>'),t.shipping.postcode&&''!==t.shipping.postcode&&(a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.postcode+'</div>'),a+='<div class="col-xs-12" style="text-align: left; padding-right: 5px;\n                            padding-top: 10px; padding-bottom: 10px">'+t.shipping.country+'</div>',$('#order-details-page #order-details-list .order-details-shipping-details').html(a)}finally{}case 1:case'end':return e.stop();}},e,this)}));return function t(){return e.apply(this,arguments)}}()}};

//# sourceMappingURL=controller-compiled.js.map